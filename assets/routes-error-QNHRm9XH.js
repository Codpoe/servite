import{u as l,j as s}from"./index-qCrzsRmR.js";import{_ as c}from"./nested-routes-cicZXIZs.js";const o="/servite/assets/error-display-9sQ7XK5k.png",a={commitTime:1702629427},t=[{id:"错误的冒泡",text:"错误的冒泡",depth:2}];function r(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...l(),...n.components};return s.jsxs(s.Fragment,{children:[s.jsxs(e.h1,{id:"路由错误展示",children:[s.jsx(e.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#路由错误展示",children:"#"}),"路由错误展示"]}),`
`,s.jsxs(e.p,{children:["当在 ",s.jsx(e.code,{children:"loader"}),"，",s.jsx(e.code,{children:"action"})," 或者组件 render 中抛出错误时，Servite 会捕获这些错误，然后展示在页面上："]}),`
`,s.jsx("img",{src:o,width:"500"}),`
`,s.jsxs(e.p,{children:["如果想自定义这个错误展示，可以在路由文件中导出 ",s.jsx(e.code,{children:"ErrorBoundary"})," 组件："]}),`
`,s.jsx(e.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D"},children:"// src/pages/page.tsx"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(e.span,{style:{color:"#24292E"},children:" "}),s.jsx(e.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(e.span,{style:{color:"#24292E"},children:" "}),s.jsx(e.span,{style:{color:"#6F42C1"},children:"ErrorBoundary"}),s.jsx(e.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E"},children:"  "}),s.jsx(e.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(e.span,{style:{color:"#24292E"},children:" <"}),s.jsx(e.span,{style:{color:"#22863A"},children:"div"}),s.jsx(e.span,{style:{color:"#24292E"},children:">🫨 啊噢，出错啦！</"}),s.jsx(e.span,{style:{color:"#22863A"},children:"div"}),s.jsx(e.span,{style:{color:"#24292E"},children:">"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(e.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D"},children:"// src/pages/page.tsx"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#F97583"},children:"export"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(e.span,{style:{color:"#F97583"},children:"function"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(e.span,{style:{color:"#B392F0"},children:"ErrorBoundary"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(e.span,{style:{color:"#F97583"},children:"return"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:" <"}),s.jsx(e.span,{style:{color:"#85E89D"},children:"div"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:">🫨 啊噢，出错啦！</"}),s.jsx(e.span,{style:{color:"#85E89D"},children:"div"}),s.jsx(e.span,{style:{color:"#E1E4E8"},children:">"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`,s.jsxs(e.h2,{id:"错误的冒泡",children:[s.jsx(e.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#错误的冒泡",children:"#"}),"错误的冒泡"]}),`
`,s.jsxs(e.p,{children:["在多层嵌套的路由结构中，当底层的页面组件抛出错误时，错误会逐层“冒泡”，最终在最近的 ",s.jsx(e.code,{children:"ErrorBoundary"})," 里被捕获并展示。"]}),`
`,s.jsx(e.p,{children:"例如这样的路由结构："}),`
`,s.jsx(e.p,{children:s.jsx(e.img,{src:c})}),`
`,s.jsxs(e.p,{children:["当 ",s.jsx(e.code,{children:"<Settings />"})," 渲染发生错误时，会先寻找 ",s.jsx(e.code,{children:"/dashboard/settings/page.tsx"})," 里导出的 ",s.jsx(e.code,{children:"ErrorBoundary"})," 组件，"]}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["如果找到了，则会使用该组件来渲染错误信息，至于 ",s.jsx(e.code,{children:"<App />"})," 和 ",s.jsx(e.code,{children:"<Dashboard />"})," 则会照常渲染。"]}),`
`,s.jsxs(e.li,{children:["如果没找到，则错误会继续往上冒泡，直到被 Servite 的顶层默认 ",s.jsx(e.code,{children:"ErrorBoundary"})," 所捕获。"]}),`
`]})]})}function h(n={}){const{wrapper:e}={...l(),...n.components};return e?s.jsx(e,{...n,children:s.jsx(r,{...n})}):r(n)}export{h as default,a as frontmatter,t as toc};
