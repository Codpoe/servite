import{u as r,j as s}from"./index-DEfUcY5W.js";import{_ as o}from"./nested-routes-BuFu5V-f.js";const a="/servite/assets/loader-action-CqFXkHoK.png",h={commitTime:1712328050},x=[{id:"数据加载",text:"数据加载",depth:2},{id:"loader-参数",text:"loader 参数",depth:3},{id:"loader-返回",text:"loader 返回",depth:3},{id:"数据更新",text:"数据更新",depth:2}];function c(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...r(),...e.components},{Callout:n}=l;return n||i("Callout",!0),s.jsxs(s.Fragment,{children:[s.jsxs(l.h1,{id:"路由数据",children:[s.jsx(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#路由数据",children:"#"}),"路由数据"]}),`
`,s.jsx(n,{type:"tip",children:s.jsxs(l.p,{children:["Servite 的路由数据功能是基于 ",s.jsx(l.a,{href:"https://reactrouter.com",children:"React Router"}),` 进行开发的，
一些使用细节可直接参考 React Router 的文档。`]})}),`
`,s.jsxs(l.p,{children:["有些数据可能会明显影响到我们的路由组件展示和用户体验，这种跟路由密切关联的数据就叫",s.jsx(l.strong,{children:"路由数据"}),"。例如："]}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsx(l.li,{children:"用户中心页面里的头像、昵称等就是路由数据"}),`
`,s.jsx(l.li,{children:"商品详情页面里的商品头图、名称、价格等也应该是路由数据"}),`
`]}),`
`,s.jsxs(l.p,{children:["在一般的 React 开发中，我们会在组件的 ",s.jsx(l.code,{children:"useEffect"}),` 中发起数据请求，也就是需要等待组件代码加载->组件渲染后才能发起请求。
这对于路由数据来说时机太晚了，尤其是当遇到多层嵌套路由时，如果每层路由都有自己的数据请求，可能会导致`,s.jsx(l.strong,{children:"瀑布流加载"}),"。"]}),`
`,s.jsx(l.p,{children:"假如我们有这样的嵌套路由结构："}),`
`,s.jsx(l.p,{children:s.jsx(l.img,{src:o})}),`
`,s.jsxs(l.p,{children:["当进入 ",s.jsx(l.code,{children:"/dashboard/settings"})," 时，传统 React 应用中会存在这样的瀑布流加载："]}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"load App script"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"render App"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"fetch /api/app"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"load Dashboard script"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"render Dashboard"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"fetch /api/dashboard"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"load Settings script"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[s.jsx(l.code,{children:"render Settings"}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsx(l.li,{children:s.jsx(l.code,{children:"fetch /api/settings"})}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`,s.jsxs(l.p,{children:["为了获取更好的用户体验和性能，Servite 借助 ",s.jsx(l.a,{href:"https://reactrouter.com",children:"React Router v6"}),` 的 loader 和 action，
实现了路由数据的并行加载，以及更简单的数据流：`]}),`
`,s.jsx("img",{src:a}),`
`,s.jsxs(l.h2,{id:"数据加载",children:[s.jsx(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#数据加载",children:"#"}),"数据加载"]}),`
`,s.jsxs(l.p,{children:["Servite 约定了加 ",s.jsx(l.code,{children:".data"})," 后缀的文件为对应路由的",s.jsx(l.strong,{children:"数据文件"}),"，举个例子，"]}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:["如果布局路由文件是 ",s.jsx(l.code,{children:"src/pages/layout.tsx"}),"，那么它对应的数据文件是 ",s.jsx(l.code,{children:"src/pages/layout.data.ts"})]}),`
`,s.jsxs(l.li,{children:["如果页面路由文件是 ",s.jsx(l.code,{children:"src/pages/about/page.tsx"}),"，那么对应的数据文件是 ",s.jsx(l.code,{children:"src/pages/about/page.data.ts"})]}),`
`]}),`
`,s.jsxs(l.p,{children:["我们可以在数据文件中导出一个 ",s.jsx(l.code,{children:"loader"})," 函数用于在组件渲染前进行数据加载："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.data.ts"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"interface"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"SomeData"}),s.jsx(l.span,{style:{color:"#24292E"},children:" {}"})]}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"fakeGetSomeData"}),s.jsx(l.span,{style:{color:"#24292E"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.data.ts"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"interface"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"SomeData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" {}"})]}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"fakeGetSomeData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`,s.jsxs(l.p,{children:["接着在对应的路由组件中可以通过 ",s.jsx(l.code,{children:"useLoaderData"})," 这个 hook 拿到数据用于渲染："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E"},children:" { useLoaderData } "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"from"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'servite/client'"}),s.jsx(l.span,{style:{color:"#24292E"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"type"}),s.jsx(l.span,{style:{color:"#24292E"},children:" { SomeData } "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"from"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'./page.data'"}),s.jsx(l.span,{style:{color:"#24292E"},children:";"})]}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"default"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"Page"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"const"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#005CC5"},children:"loaderData"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"useLoaderData"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"as"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"SomeData"}),s.jsx(l.span,{style:{color:"#24292E"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#6A737D"},children:"// ..."})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"import"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" { useLoaderData } "}),s.jsx(l.span,{style:{color:"#F97583"},children:"from"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'servite/client'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"import"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"type"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" { SomeData } "}),s.jsx(l.span,{style:{color:"#F97583"},children:"from"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'./page.data'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"default"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"Page"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"const"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"loaderData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"useLoaderData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() "}),s.jsx(l.span,{style:{color:"#F97583"},children:"as"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"SomeData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#6A737D"},children:"// ..."})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`,s.jsx(l.p,{children:"在 CSR 环境下，loader 函数会在客户端执行，loader 函数内可以使用浏览器的 API（但通常不需要，也不推荐）。"}),`
`,s.jsx(l.p,{children:"在 SSR 环境下，不管是首屏，还是在客户端的导航，loader 函数只会在服务端执行，这里可以调用任意的 Node.js API，同时这里使用的任何依赖和代码都不会包含在客户端的 bundle 中。"}),`
`,s.jsx(n,{type:"warning",children:s.jsxs(l.p,{children:["需要注意的是，如果需要在组件和 ",s.jsx(l.code,{children:".data"})," 文件之间共享 TS 类型，最好使用 ",s.jsx(l.code,{children:"import type"}),"，而不是单纯的 ",s.jsx(l.code,{children:"import"}),`，
这样能让构建工具更好地 Tree Shaking，例如上面代码中的：`,s.jsx("br",{}),`
`,s.jsx(l.code,{children:"import type { SomeData } from './page.data'"})]})}),`
`,s.jsxs(l.h3,{id:"loader-参数",children:[s.jsx(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#loader-参数",children:"#"}),"loader 参数"]}),`
`,s.jsxs(l.p,{children:[s.jsx(l.code,{children:"loader"})," 函数的参数中有两个字段：",s.jsx(l.code,{children:"params"})," 和 ",s.jsx(l.code,{children:"request"}),"。"]}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:[`
`,s.jsxs(l.p,{children:[s.jsx(l.code,{children:"params"})," 根据动态路由解析而来的，例如 ",s.jsx(l.code,{children:"/posts/[id]/page.data.tsx"}),"："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// /posts/[id]/page.data.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ "}),s.jsx(l.span,{style:{color:"#E36209"},children:"params"}),s.jsx(l.span,{style:{color:"#24292E"},children:" }) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"fakeGetPost"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ id: params.id });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// /posts/[id]/page.data.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ "}),s.jsx(l.span,{style:{color:"#FFAB70"},children:"params"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" }) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"fakeGetPost"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ id: params.id });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`]}),`
`,s.jsxs(l.li,{children:[`
`,s.jsxs(l.p,{children:[s.jsx(l.code,{children:"request"})," 是一个 ",s.jsx(l.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Request",children:"Fetch Requst"})," 实例。这个参数常见的使用场景是，从 ",s.jsx(l.code,{children:"request"})," 中解析出 url 和查询参数："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ "}),s.jsx(l.span,{style:{color:"#E36209"},children:"request"}),s.jsx(l.span,{style:{color:"#24292E"},children:" }) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"const"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#005CC5"},children:"url"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"new"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"URL"}),s.jsx(l.span,{style:{color:"#24292E"},children:"(request.url);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"const"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#005CC5"},children:"uid"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#24292E"},children:" url.searchParams."}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"get"}),s.jsx(l.span,{style:{color:"#24292E"},children:"("}),s.jsx(l.span,{style:{color:"#032F62"},children:"'uid'"}),s.jsx(l.span,{style:{color:"#24292E"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"fakeGetUser"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ uid });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ "}),s.jsx(l.span,{style:{color:"#FFAB70"},children:"request"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" }) {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"const"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"url"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"new"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"URL"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"(request.url);"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"const"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"uid"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" url.searchParams."}),s.jsx(l.span,{style:{color:"#B392F0"},children:"get"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"("}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'uid'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:");"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"fakeGetUser"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ uid });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`]}),`
`]}),`
`,s.jsxs(l.h3,{id:"loader-返回",children:[s.jsx(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#loader-返回",children:"#"}),"loader 返回"]}),`
`,s.jsxs(l.ul,{children:[`
`,s.jsxs(l.li,{children:["返回任意数据",`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"    some: "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'data'"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"  };"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    some: "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'data'"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  };"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`]}),`
`,s.jsxs(l.li,{children:["返回 Response 实例",`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"new"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"Response"}),s.jsx(l.span,{style:{color:"#24292E"},children:"("}),s.jsx(l.span,{style:{color:"#005CC5"},children:"JSON"}),s.jsx(l.span,{style:{color:"#24292E"},children:"."}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"stringify"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ some: "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'data'"}),s.jsx(l.span,{style:{color:"#24292E"},children:" }), {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"    headers: {"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"      "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'Content-Type'"}),s.jsx(l.span,{style:{color:"#24292E"},children:": "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'application/json'"}),s.jsx(l.span,{style:{color:"#24292E"},children:","})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"    },"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"  });"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"new"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"Response"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"("}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"JSON"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"."}),s.jsx(l.span,{style:{color:"#B392F0"},children:"stringify"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ some: "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'data'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" }), {"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    headers: {"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"      "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'Content-Type'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:": "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'application/json'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    },"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  });"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`,"返回的 JSON 数据的 Response 也可以使用 ",s.jsx(l.code,{children:"json"})," 这个工具函数来简化代码，所以上面例子可以简化成：",`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"import"}),s.jsx(l.span,{style:{color:"#24292E"},children:" { json } "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"from"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'servite/client'"}),s.jsx(l.span,{style:{color:"#24292E"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"json"}),s.jsx(l.span,{style:{color:"#24292E"},children:"({ some: "}),s.jsx(l.span,{style:{color:"#032F62"},children:"'data'"}),s.jsx(l.span,{style:{color:"#24292E"},children:" });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"import"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" { json } "}),s.jsx(l.span,{style:{color:"#F97583"},children:"from"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'servite/client'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"json"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"({ some: "}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'data'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`]}),`
`,s.jsxs(l.li,{children:["Throw Response 实例",`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"throw"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"new"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"Response"}),s.jsx(l.span,{style:{color:"#24292E"},children:"("}),s.jsx(l.span,{style:{color:"#032F62"},children:"'没有权限'"}),s.jsx(l.span,{style:{color:"#24292E"},children:", { status: "}),s.jsx(l.span,{style:{color:"#005CC5"},children:"403"}),s.jsx(l.span,{style:{color:"#24292E"},children:" });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"throw"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"new"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"Response"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"("}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:"'没有权限'"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:", { status: "}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"403"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" });"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`]}),`
`]}),`
`,s.jsxs(l.h2,{id:"数据更新",children:[s.jsx(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#数据更新",children:"#"}),"数据更新"]}),`
`,s.jsxs(l.p,{children:["跟上面的 ",s.jsx(l.code,{children:"loader"})," 类似，我们可以在 ",s.jsx(l.code,{children:".data"})," 文件中导出 ",s.jsx(l.code,{children:"action"})," 函数用于数据变更："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.data.ts"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"loader"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"fakeGetSomeData"}),s.jsx(l.span,{style:{color:"#24292E"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"async"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"action"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"fakeUpdateData"}),s.jsx(l.span,{style:{color:"#24292E"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.data.ts"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"loader"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"fakeGetSomeData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})}),`
`,s.jsx(l.span,{className:"line"}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"async"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"action"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"fakeUpdateData"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"();"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})}),`
`,s.jsxs(l.p,{children:["然后在组件中可以通过 ",s.jsx(l.code,{children:"useSubmit"})," 来触发 ",s.jsx(l.code,{children:"action"}),"："]}),`
`,s.jsx(l.pre,{className:"code-theme-light",style:{backgroundColor:'#f6f8fa" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#D73A49"},children:"export"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"default"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"function"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"Page"}),s.jsx(l.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"const"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#005CC5"},children:"submit"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"useSubmit"}),s.jsx(l.span,{style:{color:"#24292E"},children:"();"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"  "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"return"}),s.jsx(l.span,{style:{color:"#24292E"},children:" ("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"    <"}),s.jsx(l.span,{style:{color:"#005CC5"},children:"Form"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"      "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"onChange"}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#24292E"},children:"{("}),s.jsx(l.span,{style:{color:"#E36209"},children:"event"}),s.jsx(l.span,{style:{color:"#24292E"},children:") "}),s.jsx(l.span,{style:{color:"#D73A49"},children:"=>"}),s.jsx(l.span,{style:{color:"#24292E"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"        "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"submit"}),s.jsx(l.span,{style:{color:"#24292E"},children:"(event.currentTarget);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"      }}"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"    >"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"      <"}),s.jsx(l.span,{style:{color:"#22863A"},children:"input"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"type"}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#032F62"},children:'"text"'}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"name"}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#032F62"},children:'"search"'}),s.jsx(l.span,{style:{color:"#24292E"},children:" />"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"      <"}),s.jsx(l.span,{style:{color:"#22863A"},children:"button"}),s.jsx(l.span,{style:{color:"#24292E"},children:" "}),s.jsx(l.span,{style:{color:"#6F42C1"},children:"type"}),s.jsx(l.span,{style:{color:"#D73A49"},children:"="}),s.jsx(l.span,{style:{color:"#032F62"},children:'"submit"'}),s.jsx(l.span,{style:{color:"#24292E"},children:">Search</"}),s.jsx(l.span,{style:{color:"#22863A"},children:"button"}),s.jsx(l.span,{style:{color:"#24292E"},children:">"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#24292E"},children:"    </"}),s.jsx(l.span,{style:{color:"#005CC5"},children:"Form"}),s.jsx(l.span,{style:{color:"#24292E"},children:">"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"  );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#24292E"},children:"}"})})]})}),s.jsx(l.pre,{className:"code-theme-dark",style:{backgroundColor:'#161b22" tabindex="0'},children:s.jsxs(l.code,{children:[s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#6A737D"},children:"// page.tsx"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#F97583"},children:"export"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"default"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"function"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"Page"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"() {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"const"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"submit"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"useSubmit"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"();"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  "}),s.jsx(l.span,{style:{color:"#F97583"},children:"return"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" ("})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    <"}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"Form"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"      "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"onChange"}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"{("}),s.jsx(l.span,{style:{color:"#FFAB70"},children:"event"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:") "}),s.jsx(l.span,{style:{color:"#F97583"},children:"=>"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" {"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"        "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"submit"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:"(event.currentTarget);"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"      }}"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    >"})}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"      <"}),s.jsx(l.span,{style:{color:"#85E89D"},children:"input"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"type"}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:'"text"'}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"name"}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:'"search"'}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" />"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"      <"}),s.jsx(l.span,{style:{color:"#85E89D"},children:"button"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:" "}),s.jsx(l.span,{style:{color:"#B392F0"},children:"type"}),s.jsx(l.span,{style:{color:"#F97583"},children:"="}),s.jsx(l.span,{style:{color:"#9ECBFF"},children:'"submit"'}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:">Search</"}),s.jsx(l.span,{style:{color:"#85E89D"},children:"button"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:">"})]}),`
`,s.jsxs(l.span,{className:"line",children:[s.jsx(l.span,{style:{color:"#E1E4E8"},children:"    </"}),s.jsx(l.span,{style:{color:"#79B8FF"},children:"Form"}),s.jsx(l.span,{style:{color:"#E1E4E8"},children:">"})]}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"  );"})}),`
`,s.jsx(l.span,{className:"line",children:s.jsx(l.span,{style:{color:"#E1E4E8"},children:"}"})})]})})]})}function p(e={}){const{wrapper:l}={...r(),...e.components};return l?s.jsx(l,{...e,children:s.jsx(c,{...e})}):c(e)}function i(e,l){throw new Error("Expected "+(l?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}export{p as default,h as frontmatter,x as toc};
