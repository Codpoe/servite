import{R as N,r as c,a as O,_ as v}from"./islands-8df48262.js";import{u as k,r as R,A as l,L as I,j as m,F as y,i as _,a as n,W as D,S as E,C as A,I as P,b as F}from"./index-dea4d47d.js";import{u as T}from"./context-cc1a0ef2.js";function K(r){var a=r.target,o=a.tagName;return a.isContentEditable||o==="INPUT"||o==="SELECT"||o==="TEXTAREA"}function $(r){var a=r.isOpen,o=r.onOpen,p=r.onClose,i=r.onInput,s=r.searchButtonRef;N.useEffect(function(){function u(t){function C(){document.body.classList.contains("DocSearch--active")||o()}(t.keyCode===27&&a||t.key.toLowerCase()==="k"&&(t.metaKey||t.ctrlKey)||!K(t)&&t.key==="/"&&!a)&&(t.preventDefault(),a?p():document.body.classList.contains("DocSearch--active")||C()),s&&s.current===document.activeElement&&i&&/[a-zA-Z0-9]/.test(String.fromCharCode(t.keyCode))&&i(t)}return window.addEventListener("keydown",u),function(){window.removeEventListener("keydown",u)}},[a,o,p,i,s])}let x=null;async function h(){x||([{DocSearchModal:x}]=await Promise.all([v(()=>import("./modal-48a8dd04.js"),["assets/modal-48a8dd04.js","assets/islands-8df48262.js"]),v(()=>import("./index-4ed993c7.js"),["assets/index-4ed993c7.js","assets/index-b08bff0d.css"])]))}function j({hit:r,children:a}){return n(F,{to:r.url,children:a})}function U({iconOnly:r}){var S,g;const a=k(),{currentLocale:o}=T(),p=c.exports.useRef(null),[i,s]=c.exports.useState(!1),u=c.exports.useCallback(async()=>{await h(),s(!0)},[s]),t=c.exports.useCallback(()=>{s(!1)},[s]),C=c.exports.useCallback(e=>e.map(d=>{const{pathname:f,hash:w}=new URL(d.url);return{...d,url:`${R("/servite/")}${f}${w}`}}),[]),L=c.exports.useRef({navigate({item:e}){e!=null&&e.url&&a(e.url)}}).current,b=c.exports.useMemo(()=>{var d,f;let e=((f=(d=l)==null?void 0:d.searchParameters)==null?void 0:f.facetFilters)||[];return e=typeof e=="string"?[e]:e,I.length>1?[`lang:${o.locale}`,...e]:e},[o]);return $({isOpen:i,onOpen:u,onClose:t}),!((S=l)!=null&&S.apiKey)||!((g=l)!=null&&g.indexName)?null:m(y,{children:[!_&&n(D,{children:n("link",{rel:"preconnect",href:`https://${l.appId}-dsn.algolia.net`,crossOrigin:""})}),n("button",{ref:p,className:"group flex justify-center items-center h-full ml-6","aria-label":"Search",onMouseOver:h,onTouchStart:h,onFocus:h,onClick:u,children:r?n("div",{className:"flex justify-center w-12",children:n(E,{className:"text-xl text-c-text-0 group-hover:text-c-brand transition-colors"})}):m(y,{children:[m("div",{className:"flex items-center space-x-1.5 mr-1.5 text-c-text-2 group-hover:text-c-text-0 transition-colors",children:[n(E,{className:"text-[15px]"}),n("span",{className:"text-[13px]",children:"Search"})]}),m("div",{className:"flex items-center h-4.5 px-0.5 border border-current rounded text-xs text-c-text-3 group-hover:text-c-brand transition-colors",children:[n(A,{}),"K"]})]})}),P&&i&&x&&O.exports.createPortal(n(x,{initialScrollY:window.scrollY,transformItems:C,hitComponent:j,navigator:L,onClose:t,...l,searchParameters:{...l.searchParameters,facetFilters:b}}),document.body)]})}export{U as Search};
