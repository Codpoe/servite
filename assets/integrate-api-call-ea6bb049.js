import{u as o,j as e,a as n,F as a}from"./index-a1360d88.js";const p=void 0,t=[{id:"使用",text:"使用",depth:2},{id:"结合-typescript",text:"结合 Typescript",depth:3}];function r(s){const l=Object.assign({h1:"h1",a:"a",p:"p",ul:"ul",li:"li",h2:"h2",strong:"strong",code:"code",pre:"pre",span:"span",h3:"h3"},o(),s.components),{Callout:c}=l;return c||i("Callout",!0),n(a,{children:[n(l.h1,{id:"一体化-api-调用",children:[e(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#一体化-api-调用",children:"#"}),"一体化 API 调用"]}),`
`,e(l.p,{children:"Servite 支持一体化的 API 调用，意思就是可以在前端直接 import API 函数，调用时会自动转换成 HTTP 请求。这个方式有以下好处："}),`
`,n(l.ul,{children:[`
`,e(l.li,{children:"更简洁、优雅的 API 调用方式，无需手动写接口 URL"}),`
`,e(l.li,{children:"更完善的 Typescript 类型提示。在前端侧可以直接感知接口的参数类型和响应类型"}),`
`,e(l.li,{children:"更好的开发体验"}),`
`]}),`
`,n(l.h2,{id:"使用",children:[e(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#使用",children:"#"}),"使用"]}),`
`,n(l.p,{children:["在前面我们已经介绍过如何定义 ",e(l.a,{href:"/zh/guide/routes#api-%E8%B7%AF%E7%94%B1",children:"API 路由"}),"了，但想要实现",e(l.strong,{children:"一体化调用"}),"，你需要改为从 ",e(l.code,{children:"servite/server"})," 中导出 ",e(l.code,{children:"apiHandler"})," 方法来定义接口："]}),`
`,e(l.pre,{className:"code-theme-light",style:{backgroundColor:"#f6f8fa"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// <root>/src/server/api/todo.get.ts"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" { apiHandler } "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'servite/server'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"default"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"apiHandler"}),e(l.span,{style:{color:"#953800"},children:"("}),e(l.span,{style:{color:"#CF222E"},children:"async"}),e(l.span,{style:{color:"#953800"},children:" (args, event) "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#24292F"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#6E7781"},children:"// ..."})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#CF222E"},children:"return"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    code: "}),e(l.span,{style:{color:"#0550AE"},children:"0"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    msg: "}),e(l.span,{style:{color:"#0A3069"},children:"'ok'"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    data: "}),e(l.span,{style:{color:"#0A3069"},children:"'This is ok'"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"  };"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"}"}),e(l.span,{style:{color:"#953800"},children:")"}),e(l.span,{style:{color:"#24292F"},children:";"})]})]})}),e(l.pre,{className:"code-theme-dark",style:{backgroundColor:"#161b22"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// <root>/src/server/api/todo.get.ts"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" { apiHandler } "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'servite/server'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"default"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"apiHandler"}),e(l.span,{style:{color:"#FFA657"},children:"("}),e(l.span,{style:{color:"#FF7B72"},children:"async"}),e(l.span,{style:{color:"#FFA657"},children:" (args, event) "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#C9D1D9"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#8B949E"},children:"// ..."})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FF7B72"},children:"return"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    code: "}),e(l.span,{style:{color:"#79C0FF"},children:"0"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    msg: "}),e(l.span,{style:{color:"#A5D6FF"},children:"'ok'"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    data: "}),e(l.span,{style:{color:"#A5D6FF"},children:"'This is ok'"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"  };"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"}"}),e(l.span,{style:{color:"#FFA657"},children:")"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]})]})}),`
`,e(l.p,{children:"接着就可以在前端代码中直接 import 该文件来进行调用了："}),`
`,e(l.pre,{className:"code-theme-light",style:{backgroundColor:"#f6f8fa"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// <root>/src/pages/page.tsx"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" { useState, useEffect } "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'react'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" getTodo "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'../server/api/todo.get'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"default"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"function"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"Page"}),e(l.span,{style:{color:"#953800"},children:"() "}),e(l.span,{style:{color:"#24292F"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#CF222E"},children:"const"}),e(l.span,{style:{color:"#24292F"},children:" ["}),e(l.span,{style:{color:"#0550AE"},children:"res"}),e(l.span,{style:{color:"#24292F"},children:", "}),e(l.span,{style:{color:"#0550AE"},children:"setRes"}),e(l.span,{style:{color:"#24292F"},children:"] "}),e(l.span,{style:{color:"#CF222E"},children:"="}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"useState"}),e(l.span,{style:{color:"#24292F"},children:"();"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#8250DF"},children:"useEffect"}),e(l.span,{style:{color:"#24292F"},children:"(() "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    ("}),e(l.span,{style:{color:"#CF222E"},children:"async"}),e(l.span,{style:{color:"#24292F"},children:" () "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#6E7781"},children:"// 此调用会被自动转换成发起请求：GET /api/todo"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#CF222E"},children:"const"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"res"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"="}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"await"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"getTodo"}),e(l.span,{style:{color:"#24292F"},children:"();"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#8250DF"},children:"setRes"}),e(l.span,{style:{color:"#24292F"},children:"(res);"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"    })();"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"  }, []);"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#6E7781"},children:"// ..."})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"}"})})]})}),e(l.pre,{className:"code-theme-dark",style:{backgroundColor:"#161b22"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// <root>/src/pages/page.tsx"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" { useState, useEffect } "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'react'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" getTodo "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'../server/api/todo.get'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"default"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"function"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"Page"}),e(l.span,{style:{color:"#FFA657"},children:"() "}),e(l.span,{style:{color:"#C9D1D9"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FF7B72"},children:"const"}),e(l.span,{style:{color:"#C9D1D9"},children:" ["}),e(l.span,{style:{color:"#79C0FF"},children:"res"}),e(l.span,{style:{color:"#C9D1D9"},children:", "}),e(l.span,{style:{color:"#79C0FF"},children:"setRes"}),e(l.span,{style:{color:"#C9D1D9"},children:"] "}),e(l.span,{style:{color:"#FF7B72"},children:"="}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"useState"}),e(l.span,{style:{color:"#C9D1D9"},children:"();"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#D2A8FF"},children:"useEffect"}),e(l.span,{style:{color:"#C9D1D9"},children:"(() "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    ("}),e(l.span,{style:{color:"#FF7B72"},children:"async"}),e(l.span,{style:{color:"#C9D1D9"},children:" () "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#8B949E"},children:"// 此调用会被自动转换成发起请求：GET /api/todo"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#FF7B72"},children:"const"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"res"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"="}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"await"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"getTodo"}),e(l.span,{style:{color:"#C9D1D9"},children:"();"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#D2A8FF"},children:"setRes"}),e(l.span,{style:{color:"#C9D1D9"},children:"(res);"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"    })();"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"  }, []);"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#8B949E"},children:"// ..."})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"}"})})]})}),`
`,e(c,{type:"tip",children:n(l.p,{children:["一体化 API 调用相关的配置项可以看",e(l.a,{href:"/zh/guide/config#api",children:"这里"}),"。"]})}),`
`,n(l.h3,{id:"结合-typescript",children:[e(l.a,{className:"header-anchor","aria-hidden":"true",tabIndex:"-1",href:"#结合-typescript",children:"#"}),"结合 Typescript"]}),`
`,e(l.p,{children:"结合 Typescript，定义好接口的入参类型和返回结果类型，能让一体化调用达到更好的开发体验："}),`
`,e(l.pre,{className:"code-theme-light",style:{backgroundColor:"#f6f8fa"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// <root>/src/server/api/todo.get.ts"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" { apiHandler } "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'servite/server'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"enum"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#953800"},children:"Bar"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#0550AE"},children:"Great"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#0550AE"},children:"Cool"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// 定义入参类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"interface"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#953800"},children:"Args"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#953800"},children:"foo"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"string"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#953800"},children:"bar"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#953800"},children:"Bar"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// 定义响应类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"interface"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#953800"},children:"Result"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#953800"},children:"code"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"number"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#953800"},children:"msg"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"string"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#953800"},children:"data"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"string"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// 通过泛型来约束函数类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"default"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"apiHandler"}),e(l.span,{style:{color:"#953800"},children:"<Args, Result>("}),e(l.span,{style:{color:"#CF222E"},children:"async"}),e(l.span,{style:{color:"#953800"},children:" (args"}),e(l.span,{style:{color:"#CF222E"},children:":"}),e(l.span,{style:{color:"#953800"},children:" Args, event) "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#24292F"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#6E7781"},children:"// ..."})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#CF222E"},children:"return"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    code: "}),e(l.span,{style:{color:"#0550AE"},children:"0"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    msg: "}),e(l.span,{style:{color:"#0A3069"},children:"'ok'"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    data: "}),e(l.span,{style:{color:"#0A3069"},children:"'This is ok'"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"  };"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"}"}),e(l.span,{style:{color:"#953800"},children:")"}),e(l.span,{style:{color:"#24292F"},children:";"})]})]})}),e(l.pre,{className:"code-theme-dark",style:{backgroundColor:"#161b22"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// <root>/src/server/api/todo.get.ts"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" { apiHandler } "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'servite/server'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"enum"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FFA657"},children:"Bar"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#79C0FF"},children:"Great"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#79C0FF"},children:"Cool"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// 定义入参类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"interface"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FFA657"},children:"Args"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FFA657"},children:"foo"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"string"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FFA657"},children:"bar"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FFA657"},children:"Bar"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// 定义响应类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"interface"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FFA657"},children:"Result"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FFA657"},children:"code"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"number"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FFA657"},children:"msg"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"string"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FFA657"},children:"data"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"string"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"}"})}),`
`,e(l.span,{className:"line"}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// 通过泛型来约束函数类型"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"default"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"apiHandler"}),e(l.span,{style:{color:"#FFA657"},children:"<Args, Result>("}),e(l.span,{style:{color:"#FF7B72"},children:"async"}),e(l.span,{style:{color:"#FFA657"},children:" (args"}),e(l.span,{style:{color:"#FF7B72"},children:":"}),e(l.span,{style:{color:"#FFA657"},children:" Args, event) "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#C9D1D9"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#8B949E"},children:"// ..."})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FF7B72"},children:"return"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    code: "}),e(l.span,{style:{color:"#79C0FF"},children:"0"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    msg: "}),e(l.span,{style:{color:"#A5D6FF"},children:"'ok'"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    data: "}),e(l.span,{style:{color:"#A5D6FF"},children:"'This is ok'"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"  };"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"}"}),e(l.span,{style:{color:"#FFA657"},children:")"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]})]})}),`
`,e(l.p,{children:"在前端 import 相关的类型："}),`
`,e(l.pre,{className:"code-theme-light",style:{backgroundColor:"#f6f8fa"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#6E7781"},children:"// <root>/src/pages/page.tsx"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" { useState, useEffect } "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'react'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"import"}),e(l.span,{style:{color:"#24292F"},children:" getTodo, { Result, Bar } "}),e(l.span,{style:{color:"#CF222E"},children:"from"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0A3069"},children:"'../server/api/todo.get'"}),e(l.span,{style:{color:"#24292F"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#CF222E"},children:"export"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"default"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"function"}),e(l.span,{style:{color:"#953800"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"Page"}),e(l.span,{style:{color:"#953800"},children:"() "}),e(l.span,{style:{color:"#24292F"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#6E7781"},children:"// 使用 Result 作为 useState 的泛型"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#CF222E"},children:"const"}),e(l.span,{style:{color:"#24292F"},children:" ["}),e(l.span,{style:{color:"#0550AE"},children:"res"}),e(l.span,{style:{color:"#24292F"},children:", "}),e(l.span,{style:{color:"#0550AE"},children:"setRes"}),e(l.span,{style:{color:"#24292F"},children:"] "}),e(l.span,{style:{color:"#CF222E"},children:"="}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"useState"}),e(l.span,{style:{color:"#24292F"},children:"<"}),e(l.span,{style:{color:"#953800"},children:"Result"}),e(l.span,{style:{color:"#24292F"},children:">();"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#8250DF"},children:"useEffect"}),e(l.span,{style:{color:"#24292F"},children:"(() "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"    ("}),e(l.span,{style:{color:"#CF222E"},children:"async"}),e(l.span,{style:{color:"#24292F"},children:" () "}),e(l.span,{style:{color:"#CF222E"},children:"=>"}),e(l.span,{style:{color:"#24292F"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#6E7781"},children:"// 此调用会被自动转换成发起请求：GET /api/todo?foo=xxx&bar=0"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#CF222E"},children:"const"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#0550AE"},children:"res"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"="}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#CF222E"},children:"await"}),e(l.span,{style:{color:"#24292F"},children:" "}),e(l.span,{style:{color:"#8250DF"},children:"getTodo"}),e(l.span,{style:{color:"#24292F"},children:"({"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"        foo: "}),e(l.span,{style:{color:"#0A3069"},children:"'xxx'"}),e(l.span,{style:{color:"#24292F"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"        bar: Bar.Great,"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"      });"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"      "}),e(l.span,{style:{color:"#8250DF"},children:"setRes"}),e(l.span,{style:{color:"#24292F"},children:"(res);"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"    })();"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"  }, []);"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#24292F"},children:"  "}),e(l.span,{style:{color:"#6E7781"},children:"// ..."})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#24292F"},children:"}"})})]})}),e(l.pre,{className:"code-theme-dark",style:{backgroundColor:"#161b22"},children:n(l.code,{children:[e(l.span,{className:"line",children:e(l.span,{style:{color:"#8B949E"},children:"// <root>/src/pages/page.tsx"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" { useState, useEffect } "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'react'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"import"}),e(l.span,{style:{color:"#C9D1D9"},children:" getTodo, { Result, Bar } "}),e(l.span,{style:{color:"#FF7B72"},children:"from"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#A5D6FF"},children:"'../server/api/todo.get'"}),e(l.span,{style:{color:"#C9D1D9"},children:";"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#FF7B72"},children:"export"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"default"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"function"}),e(l.span,{style:{color:"#FFA657"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"Page"}),e(l.span,{style:{color:"#FFA657"},children:"() "}),e(l.span,{style:{color:"#C9D1D9"},children:"{"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#8B949E"},children:"// 使用 Result 作为 useState 的泛型"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#FF7B72"},children:"const"}),e(l.span,{style:{color:"#C9D1D9"},children:" ["}),e(l.span,{style:{color:"#79C0FF"},children:"res"}),e(l.span,{style:{color:"#C9D1D9"},children:", "}),e(l.span,{style:{color:"#79C0FF"},children:"setRes"}),e(l.span,{style:{color:"#C9D1D9"},children:"] "}),e(l.span,{style:{color:"#FF7B72"},children:"="}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"useState"}),e(l.span,{style:{color:"#C9D1D9"},children:"<"}),e(l.span,{style:{color:"#FFA657"},children:"Result"}),e(l.span,{style:{color:"#C9D1D9"},children:">();"})]}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#D2A8FF"},children:"useEffect"}),e(l.span,{style:{color:"#C9D1D9"},children:"(() "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"    ("}),e(l.span,{style:{color:"#FF7B72"},children:"async"}),e(l.span,{style:{color:"#C9D1D9"},children:" () "}),e(l.span,{style:{color:"#FF7B72"},children:"=>"}),e(l.span,{style:{color:"#C9D1D9"},children:" {"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#8B949E"},children:"// 此调用会被自动转换成发起请求：GET /api/todo?foo=xxx&bar=0"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#FF7B72"},children:"const"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#79C0FF"},children:"res"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"="}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#FF7B72"},children:"await"}),e(l.span,{style:{color:"#C9D1D9"},children:" "}),e(l.span,{style:{color:"#D2A8FF"},children:"getTodo"}),e(l.span,{style:{color:"#C9D1D9"},children:"({"})]}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"        foo: "}),e(l.span,{style:{color:"#A5D6FF"},children:"'xxx'"}),e(l.span,{style:{color:"#C9D1D9"},children:","})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"        bar: Bar.Great,"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"      });"})}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"      "}),e(l.span,{style:{color:"#D2A8FF"},children:"setRes"}),e(l.span,{style:{color:"#C9D1D9"},children:"(res);"})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"    })();"})}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"  }, []);"})}),`
`,e(l.span,{className:"line"}),`
`,n(l.span,{className:"line",children:[e(l.span,{style:{color:"#C9D1D9"},children:"  "}),e(l.span,{style:{color:"#8B949E"},children:"// ..."})]}),`
`,e(l.span,{className:"line",children:e(l.span,{style:{color:"#C9D1D9"},children:"}"})})]})})]})}function h(s={}){const{wrapper:l}=Object.assign({},o(),s.components);return l?e(l,Object.assign({},s,{children:e(r,s)})):r(s)}function i(s,l){throw new Error("Expected "+(l?"component":"object")+" `"+s+"` to be defined: you likely forgot to import, pass, or provide it.")}export{h as default,p as meta,t as toc};
