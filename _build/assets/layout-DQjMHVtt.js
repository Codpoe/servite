const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DMt9e_IA.js","assets/jsx-runtime-OjB1YB6s.js","assets/router-fjRubvLf.js","assets/index-Bfd0p7Qn.js","assets/preload-helper-BrvI3jIZ.js","assets/icons-l6Z_DaLy.js","assets/index-Crl2ozBJ.js"])))=>i.map(i=>d[i]);
import{r as o,j as e,R as N}from"./jsx-runtime-OjB1YB6s.js";import{L as w}from"./router-fjRubvLf.js";import{_ as z,a as _}from"./preload-helper-BrvI3jIZ.js";import{q as I,h as M,O as C,p as L,c as p,L as g,R,a as H,m as A,A as O,b as q,n as D}from"./icons-l6Z_DaLy.js";import{M as F}from"./index-Crl2ozBJ.js";import{a as V,b as k,S as B,O as T,d as P}from"./index-Bfd0p7Qn.js";let v=!1;const U=({children:s})=>{const[t,i]=o.useState(v);return o.useEffect(()=>{v=!0,i(!0)},[]),t?e.jsx(e.Fragment,{children:s}):null},b="servite-island-hydrate";let j=new Set;function W(s){return j===!0||j.has(s)}const h={};function Y({innerRef:s,hydrate:t,...i}){const[a,c]=o.useState(()=>({innerHtml:document.getElementById(t.id)?.innerHTML||"",Component:h[t.id]?.Component}));return o.useEffect(()=>{if(!t.on)return;const r=async()=>{if(h[t.id]?.Component)return;const{default:n}=await t.load();h[t.id]={Component:n},c(d=>({...d,Component:n}))};switch(t.on){case"load":{r();break}case"idle":{(window.requestIdleCallback||(n=>setTimeout(n,100)))(r);break}case"visible":{const n=document.getElementById(t.id);if(!n)break;const d=new IntersectionObserver(u=>{for(const m of u)if(m.isIntersecting){d.disconnect(),r();break}});for(const u of Array.from(n.children))d.observe(u);break}case"manual":{const n=()=>W(t.id)?(r(),window.removeEventListener(b,n),!0):!1;n()||window.addEventListener(b,n);break}default:{if(t.on.startsWith("media ")){const n=t.on.replace("media ",""),d=window.matchMedia(n);d.matches?r():d.addEventListener("change",u=>{u.matches&&r()});break}console.warn(`Unsupported hydrate mode: ${t.on}. Use 'load' | 'idle' | 'visible' | 'manual' | 'media' instead.`),r()}}if(typeof t.timeout=="number"){const n=setTimeout(()=>r(),t.timeout);return()=>clearTimeout(n)}},[]),a.Component?e.jsx("servite-island",{id:t.id,style:{display:"contents"},children:e.jsx(a.Component,{ref:s,...i})}):e.jsx("servite-island",{id:t.id,style:{display:"contents"},dangerouslySetInnerHTML:{__html:a.innerHtml},suppressHydrationWarning:!0})}const $=()=>z(()=>import("./index-DMt9e_IA.js"),__vite__mapDeps([0,1,2,3,4,5,6])),G=o.forwardRef(function(t,i){return e.jsx(Y,{...t,innerRef:i,hydrate:{...t.hydrate,id:t.hydrate?.id||"island_07604",load:$}})}),K={tip:I,info:M,warning:C,danger:L};function X({type:s,title:t=s.toUpperCase(),icon:i=K[s],children:a}){return e.jsxs("div",{className:`callout callout-${s} relative my-5 p-4 rounded-lg`,children:[e.jsx("div",{className:"callout-bg absolute top-0 bottom-0 left-0 right-0 rounded-lg"}),e.jsxs("div",{className:"callout-header flex items-start space-x-2 text-base font-bold",children:[e.jsx("span",{className:"flex items-center h-6",children:typeof i=="string"?i:N.createElement(i,{width:"1.2em"})}),e.jsx("div",{children:t})]}),a&&e.jsx("div",{className:"callout-content mt-1 ml-0.5",children:a})]})}function J({href:s,...t}){return s?.startsWith("/")?e.jsx(w,{...t,to:s||""}):e.jsx("a",{href:s,target:"_blank",rel:"noreferrer",...t})}function Q(s){return e.jsx("div",{className:"my-[2em] overflow-x-auto",children:e.jsx("table",{...s})})}function Z({children:s}){return e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(F,{components:{Callout:X,a:J,table:Q},children:s})})}function ee(){const s=V();return s[s.length-1]?.handle||{}}const y=[{title:"介绍",value:"/zh/guide"},{title:"开始上手",value:"/zh/guide/start"},{title:"配置",value:"/zh/guide/config"},{title:"目录结构",value:"/zh/guide/directory-structure"},{title:"路由",value:"/zh/guide/routes"},{title:"路由数据",value:"/zh/guide/routes-data"},{title:"路由错误",value:"/zh/guide/routes-error"},{title:"服务中间件",value:"/zh/guide/middlewares"},{title:"SSR 服务端渲染",value:"/zh/guide/ssr"},{title:"SSG 静态生成",value:"/zh/guide/ssg"},{title:"CSR 客户端渲染",value:"/zh/guide/csr"},{title:"部署",value:"/zh/guide/deploy"},{title:"进阶",children:[{title:"运行时能力",value:"/zh/guide/runtime"},{title:"一体化 API 调用",value:"/zh/guide/unified-invocation"},{title:"自定义服务端 logger",value:"/zh/guide/custom-logger"},{title:"islands - 孤岛架构",value:"/zh/guide/islands"}]}];function te(s,t){let i=null,a=null,c=null;function r(...n){a=n,c=this,i||(i=setTimeout(()=>{i=null,a&&(s.apply(c,a),a=null,c=null)},t))}return r}function se(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}const x="servite:theme";function ne({fixedSidebarVisible:s,setFixedSidebarVisible:t}){const{pathname:i}=k(),a=P();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:p("fixed inset-0 bg-black/60 z-40 sm:hidden transition-all",s?"visible opacity-100":"invisible opacity-0 pointer-events-none"),onClick:()=>t(!1)}),e.jsx(D,{className:p("flex-shrink-0 fixed top-0 right-full bottom-0 h-screen bg-background z-40 sm:z-auto sm:sticky sm:-mt-14 sm:pt-20 sm:bg-transparent transition-transform overflow-x-auto",s&&"translate-x-full"),items:y,value:i,onChange:c=>{o.startTransition(()=>a(c)),t(!1)}}),e.jsx("div",{className:"px-5 sm:px-7 flex-1 pt-6 pb-14 min-w-0",children:e.jsx(Z,{children:e.jsx(T,{})})}),e.jsx(G,{hydrate:{on:"visible"},className:"sticky top-14 pt-6 flex-shrink-0 hidden lg:block"})]})}function de(){const{pathname:s}=k(),{toc:t}=ee(),i=o.useMemo(()=>t?.find(l=>l.depth===1)?.text,[t]),[a,c]=o.useState(!1),[r,n]=o.useState(!1),[d,u]=o.useState(()=>typeof document<"u"&&window.localStorage.getItem(x)||"light"),m=o.useMemo(()=>{for(const l of y)if("children"in l){const f=l.children?.find(S=>S.value===s);if(f)return[l,f]}else if(l.value===s)return[l]},[s]),E=()=>{const l=d==="light"?"dark":"light";u(l),window.localStorage.setItem(x,l),document.documentElement.classList.toggle("dark")};return o.useEffect(()=>{const l=te(()=>{se()>=120?n(!0):n(!1)},50);return l(),window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{titleTemplate:"%s | Servite",defaultTitle:"Servite",children:[e.jsx("title",{children:i}),e.jsx("meta",{name:"description",content:"A full-stack React framework"}),e.jsx("script",{children:`const __theme = typeof document !== 'undefined' && window.localStorage.getItem('${x}') || 'light';
            if (__theme === 'dark') {
              document.documentElement.classList.add('dark');
            }`})]}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsxs("header",{className:"sticky top-0 left-0 right-0 z-30 bg-background/60 border-b border-border backdrop-blur-sm backdrop-saturate-200",children:[e.jsxs("div",{className:"max-w-[1380px] h-14 px-5 sm:px-7 mx-auto flex items-center relative",children:[e.jsx("div",{className:"w-64",children:e.jsx(w,{className:"inline-block",to:"/zh",children:e.jsx("h1",{className:"text-xl font-semibold",children:"Servite"})})}),i&&e.jsx("div",{className:"relative h-full flex-1 overflow-hidden",children:e.jsx("h2",{className:p("hidden sm:flex text-xl font-medium absolute left-0 h-full items-center cursor-pointer transition-all",r?"top-0 opacity-100":"top-full opacity-0"),onClick:()=>window.scrollTo({top:0}),children:i})}),e.jsxs("div",{className:"ml-auto space-x-1",children:[e.jsx(U,{children:e.jsx(g,{variant:"ghost",size:"icon",icon:d==="light"?e.jsx(R,{}):e.jsx(H,{}),onClick:E})}),e.jsx("a",{href:"https://github.com/Codpoe/servite",target:"_blank",rel:"noreferrer",children:e.jsx(g,{variant:"ghost",size:"icon",icon:e.jsx(A,{})})})]})]}),!!m?.length&&e.jsxs("div",{className:"sm:hidden sticky top-14 z-30 h-9 px-5 sm:px-7 flex items-center space-x-2 font-medium cursor-pointer border-t border-border",onClick:()=>c(!0),children:[e.jsx(O,{width:12}),m?.map((l,f)=>e.jsxs(o.Fragment,{children:[e.jsx("span",{className:"text-xs",children:l.title},f),f<m.length-1&&e.jsx(q,{width:12})]},f))]})]}),e.jsx("div",{className:"max-w-[1380px] mx-auto flex justify-center items-start",children:m?.length?e.jsx(ne,{fixedSidebarVisible:a,setFixedSidebarVisible:c}):e.jsx(T,{})})]})]})}export{de as L,se as g,te as t,ee as u};
