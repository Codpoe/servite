import{r as n,j as e}from"./jsx-runtime-OjB1YB6s.js";import{c as p,D as g,f as x}from"./icons-DiXaHApO.js";import{L as b}from"./router-DOCjaTsd.js";import{d as y,g as v}from"./layout-DQmWjoZN.js";import"./index-DsYWWv1e.js";import"./preload-helper-DHJfT4Bb.js";import"./index-Crl2ozBJ.js";function m(a){return a.replace(/\/$/,"").replace("/#","#")}let j;async function u(){return j||=(async()=>{const a=await import(m("/servite")+"/pagefind/pagefind.js");return await a.init(),a})()}function E({className:a}){const[o,l]=n.useState(""),[c,i]=n.useState([]),d=n.useMemo(()=>y(async r=>{const s=await u();if(!s)return;const t=await s.search(r);if(!t?.results?.length){i([]);return}const h=await Promise.all(t.results.slice(0,5).map(f=>f.data()));i(h)},400),[]);return n.useEffect(()=>{if(!o){i([]);return}d(o)},[o,d]),e.jsxs("div",{className:p("relative group",a),children:[e.jsx(g,{className:"pointer-events-none absolute top-1/2 left-2.5 -mt-2 w-4 h-4 text-muted-foreground"}),e.jsx(x,{className:"pl-8 pr-10 w-52 group-hover:border-foreground/50 group-focus-within:border-foreground/50 dark:bg-secondary dark:border-foreground/5 transition-colors","aria-label":"Search",autoComplete:"off",spellCheck:"false",placeholder:"Search",value:o,onChange:r=>l(r.target.value),onKeyDown:()=>{const r=v();setTimeout(()=>{window.scrollTo({top:r})})},onMouseEnter:()=>u()}),e.jsxs("kbd",{className:"pointer-events-none absolute top-1/2 right-1.5 -translate-y-1/2 h-5 select-none flex items-center gap-1 rounded border bg-secondary px-1.5 font-mono text-[10px] font-medium opacity-70 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity",children:[e.jsx("span",{className:"",children:"âŒ˜"}),"K"]}),e.jsx("div",{className:p("hidden absolute top-full right-0 w-[500px] max-h-[600px] overflow-y-auto mt-2 px-2.5 pb-2.5 bg-secondary rounded-lg border border-border/60 shadow-lg dark:border-border text-sm",o&&"group-focus-within:block"),children:c.length?e.jsx("div",{className:"",children:c.map(r=>{const s=r.url.substring(0,r.url.length-r.raw_url.length);return e.jsxs("div",{children:[e.jsx("div",{className:"sticky top-0 font-medium text-primary py-2.5 bg-secondary/60 backdrop-blur-sm backdrop-saturate-200",children:r.meta.title}),e.jsx("div",{className:"space-y-2.5",children:r.sub_results.map(t=>e.jsxs(b,{className:"block px-3.5 py-2.5 bg-background text-foreground shadow-sm border border-transparent rounded-md hover:border-primary transition-all",to:m(t.url.startsWith(s)?t.url.slice(s.length):t.url),onClick:()=>l(""),children:[e.jsxs("div",{className:"font-medium mb-1.5",children:[t.anchor.element!=="h1"&&"# ",t.title]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.excerpt}})]},t.url))}),e.jsx("div",{className:"h-4"})]},r.url)})}):e.jsx("div",{className:"flex justify-center pt-[30px] pb-5",children:"No result"})})]})}export{E as Search,E as default};
