import{j as s}from"./jsx-runtime-OjB1YB6s.js";import{u as r}from"./index-Crl2ozBJ.js";const h={commitTime:1727689725},o=[{id:"路由",text:"路由",depth:1},{id:"页面路由",text:"页面路由",depth:2},{id:"普通路由",text:"普通路由",depth:3},{id:"动态参数路由",text:"动态参数路由",depth:3},{id:"可选参数路由",text:"可选参数路由",depth:3},{id:"路由分组",text:"路由分组",depth:3},{id:"markdown-路由",text:"Markdown 路由",depth:2},{id:"api-路由",text:"API 路由",depth:2}];function n(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...r(),...e.components},{Callout:l}=i;return l||d("Callout"),s.jsxs(s.Fragment,{children:[s.jsx(i.h1,{id:"路由",children:"路由"}),`
`,s.jsx(i.p,{children:"servite 使用约定式路由（文件系统路由），文件路径会被简单地映射为路由路径，这会使整个项目的路由变得非常直观。"}),`
`,s.jsx(i.p,{children:"由于 servite 同时支持写页面、Markdown 和 API 接口，路由系统也就分成了两个部分："}),`
`,s.jsxs(i.ul,{children:[`
`,s.jsx(i.li,{children:"页面路由"}),`
`,s.jsx(i.li,{children:"Markdown 路由"}),`
`,s.jsx(i.li,{children:"API 路由"}),`
`]}),`
`,s.jsx(i.h2,{id:"页面路由",children:"页面路由"}),`
`,s.jsxs(i.p,{children:["servite 会收集 ",s.jsx(i.a,{href:"/zh/guide/config#source",children:"source.pagesDir"})," 指定目录下的文件作为页面："]}),`
`,s.jsxs(i.ul,{children:[`
`,s.jsxs(i.li,{children:[s.jsx(i.code,{children:"page.{js,jsx,ts,tsx}"})," 会作为",s.jsx(i.strong,{children:"页面组件"})]}),`
`,s.jsxs(i.li,{children:[s.jsx(i.code,{children:"layout.{js,jsx,ts,tsx}"})," 会作为",s.jsx(i.strong,{children:"布局组件"})]}),`
`]}),`
`,s.jsx(l,{type:"tip",children:s.jsxs(i.ul,{children:[`
`,s.jsxs(i.li,{children:["不管是 ",s.jsx(i.code,{children:".md"})," 还是 ",s.jsx(i.code,{children:".mdx"}),"，servite 都会统一使用 MDX 来解析 Markdown 文件内容。"]}),`
`,s.jsxs(i.li,{children:["如果是 ",s.jsx(i.code,{children:".js"}),"、",s.jsx(i.code,{children:".jsx"}),"、",s.jsx(i.code,{children:".ts"}),"、",s.jsx(i.code,{children:".tsx"})," 页面文件，这些文件模块需要默认导出一个组件。"]}),`
`]})}),`
`,s.jsx(i.h3,{id:"普通路由",children:"普通路由"}),`
`,s.jsx(i.p,{children:"假设你的项目 src/pages 目录有如下文件结构："}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"src/pages"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  ├─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" dashboard"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  ├─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" analytics"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" page.tsx"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  │"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  ├─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" settings"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" page.tsx"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  │"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" layout.tsx"})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  ├─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" layout.tsx"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" page.tsx"})]})]})}),`
`,s.jsx(i.p,{children:"实际得到的路由映射是："}),`
`,s.jsxs(i.table,{children:[s.jsx(i.thead,{children:s.jsxs(i.tr,{children:[s.jsx(i.th,{children:"文件路径"}),s.jsx(i.th,{children:"路由路径"}),s.jsx(i.th,{children:"是否布局组件"})]})}),s.jsxs(i.tbody,{children:[s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/layout.tsx"})}),s.jsx(i.td,{children:"``"}),s.jsx(i.td,{children:"是"})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/page.tsx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/"})}),s.jsx(i.td,{children:"否"})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/dashboard/layout.tsx"})}),s.jsx(i.td,{children:"``"}),s.jsx(i.td,{children:"是"})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/dashboard/analytics/page.tsx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/dashboard/analytics"})}),s.jsx(i.td,{children:"否"})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/dashboard/settings/page.tsx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/dashboard/settings"})}),s.jsx(i.td,{children:"否"})]})]})]}),`
`,s.jsx(i.p,{children:"对应的 React Router 配置对象类似于："}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:"const"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#C6CCD7"},children:" routes"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:" ="}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" ["})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"  {"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    element"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#61AFEF"},children:"Layout"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" />"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    children"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" ["})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"      {"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"        path"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"/"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"        element"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#61AFEF"},children:"Index"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" />"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"      }"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"      {"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"        element"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#61AFEF"},children:"DashboardLayout"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" />"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"        children"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" ["})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"          {"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"            path"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"/dashboard/analytics"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"            element"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#61AFEF"},children:"Analytics"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" />"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"          }"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"          {"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"            path"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"/dashboard/settings"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"            element"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#61AFEF"},children:"Settings"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" />"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"          }"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"        ]"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"      }"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    ]"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"  }"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"];"})})]})}),`
`,s.jsx(i.h3,{id:"动态参数路由",children:"动态参数路由"}),`
`,s.jsxs(i.p,{children:["像 ",s.jsx(i.code,{children:"/posts/[id]"})," 这样的路径就是动态参数路由，",s.jsx(i.code,{children:"[]"})," 里面的 ",s.jsx(i.code,{children:"id"})," 是动态参数。当我们跳转到 ",s.jsx(i.code,{children:"/posts/123"}),` 时，
在页面组件中可以通过 `,s.jsx(i.code,{children:"useParams"})," 拿到这个值为 ",s.jsx(i.code,{children:"123"})," 的 ",s.jsx(i.code,{children:"id"}),"："]}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"// posts/[id]/page.tsx"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"import"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"useParams"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"from"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"servite/runtime/router"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:";"})]}),`
`,s.jsx(i.span,{className:"line"}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"// 如果 pathname 是 /posts/123 会渲染成：<p>123</p>"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"export"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:" default"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:" function"}),s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:" Post"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"() {"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:"  const"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#C6CCD7"},children:"id"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"="}),s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:" useParams"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"();"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"  return"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#E5C07B"},children:"p"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:">{"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"id"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"}</"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#E5C07B"},children:"p"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:">;"})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"}"})})]})}),`
`,s.jsx(i.h3,{id:"可选参数路由",children:"可选参数路由"}),`
`,s.jsxs(i.p,{children:["像 ",s.jsx(i.code,{children:"/posts/[[id]]"})," 这样的路径就是可选参数路由，",s.jsx(i.code,{children:"[[]]"})," 里面的 ",s.jsx(i.code,{children:"id"})," 是可选参数。无论我们跳转 ",s.jsx(i.code,{children:"/posts"})," 还是 ",s.jsx(i.code,{children:"/posts/123"}),`，
都会走到这个页面组件。`]}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"// posts/[[id]]/page.tsx"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"import"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"useParams"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"from"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"servite/runtime/router"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:";"})]}),`
`,s.jsx(i.span,{className:"line"}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"// 如果 pathname 是 /posts 会渲染成：<p></p>"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"// 如果 pathname 是 /posts/123 会渲染成：<p>123</p>"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"export"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:" default"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:" function"}),s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:" Post"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"() {"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:"  const"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#C6CCD7"},children:"id"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"="}),s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:" useParams"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"();"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"  return"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" <"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#E5C07B"},children:"p"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:">{"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"id"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"}</"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#E5C07B"},children:"p"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:">;"})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"}"})})]})}),`
`,s.jsx(i.h3,{id:"路由分组",children:"路由分组"}),`
`,s.jsxs(i.p,{children:[`路由分组的概念来源于 Next.js 的 App 路由。在约定式路由中，目录会直白地映射为 URL 路径，
但有些时候我们的确想让某个目录不被映射为 URL 的一部分，这时就可以使用`,s.jsx(i.strong,{children:"路由分组"}),"，这能让我们组织出更有逻辑性的项目目录结构。"]}),`
`,s.jsxs(i.p,{children:["举个例子，我们把不同语种翻译的文档按语种划分到不同的目录下，就像 ",s.jsx(i.code,{children:"/zh/about.tsx"})," 和 ",s.jsx(i.code,{children:"/en/about.tsx"}),`，但可能英文作为站点的默认语言，
我们不想在 URL 上有 `,s.jsx(i.code,{children:"en"})," 这个路径，这时只需要给 ",s.jsx(i.code,{children:"en"})," 加上括号 ",s.jsx(i.code,{children:"(en)"})," 即可成为路由分组："]}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"src/pages"})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  ├─"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" (en)"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  │"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" about.tsx"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"  └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" zh"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"     └─"}),s.jsx(i.span,{style:{color:"#2B5581","--shiki-dark":"#98C379"},children:" about.tsx"})]})]})}),`
`,s.jsxs(i.p,{children:["这样我们就可以通过 ",s.jsx(i.code,{children:"/about"})," 访问到英文文档，通过 ",s.jsx(i.code,{children:"/zh/about"})," 访问到中文文档。"]}),`
`,s.jsx(i.h2,{id:"markdown-路由",children:"Markdown 路由"}),`
`,s.jsxs(i.p,{children:[`Markdown 的路由跟页面路由类似，Markdown 路由也有动态参数、可选参数、路由分组等概念，
只是从实用性出发， Markdown 路由文件名不再需要是 `,s.jsx(i.code,{children:"page.mdx"})," 或 ",s.jsx(i.code,{children:"layout.mdx"}),`，文件名就直接反映了路由路径。
并且如果 Markdown 文件名是 `,s.jsx(i.code,{children:"index"})," 或者 ",s.jsx(i.code,{children:"README"}),"，则这部分文件名会被忽略。"]}),`
`,s.jsx(i.p,{children:"例如下面的目录结构："}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"src/pages"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"  ├─ guide"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"  │  ├─ config.mdx"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"  │  └─ index.mdx"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"  ├─ api.mdx"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{children:"  └─ README.mdx"})})]})}),`
`,s.jsx(i.p,{children:"实际得到的路由映射是："}),`
`,s.jsxs(i.table,{children:[s.jsx(i.thead,{children:s.jsxs(i.tr,{children:[s.jsx(i.th,{children:"文件路径"}),s.jsx(i.th,{children:"路由路径"})]})}),s.jsxs(i.tbody,{children:[s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/guide/config.mdx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/guide/config"})})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/guide/index.mdx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/guide"})})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/api.mdx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/api"})})]}),s.jsxs(i.tr,{children:[s.jsx(i.td,{children:s.jsx(i.code,{children:"/README.mdx"})}),s.jsx(i.td,{children:s.jsx(i.code,{children:"/"})})]})]})]}),`
`,s.jsx(l,{type:"tip",children:s.jsxs(i.p,{children:["Markdown 路由文件名后缀需是 ",s.jsx(i.code,{children:".mdx"})," 或 ",s.jsx(i.code,{children:".md"}),"。"]})}),`
`,s.jsx(i.h2,{id:"api-路由",children:"API 路由"}),`
`,s.jsxs(i.p,{children:["默认情况下，servite 会将 ",s.jsx(i.code,{children:"src/server/routes"})," 目录下的 ",s.jsx(i.code,{children:"*.<http-method>.[jt]s"})," 文件作为 API 接口。"]}),`
`,s.jsxs(i.p,{children:["举个例子，文件 ",s.jsx(i.code,{children:"src/server/routes/api/todo.get.ts"})," 有如下内容："]}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"import"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"eventHandler"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"from"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"servite/runtime/server"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:";"})]}),`
`,s.jsx(i.span,{className:"line"}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"export"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:" default"}),s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:" eventHandler"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"("}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:"async"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:" event"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#61AFEF"},children:" =>"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" {"})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#C2C3C5","--shiki-dark":"#5F6672",fontStyle:"inherit","--shiki-dark-font-style":"italic"},children:"  // ..."})}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"  return"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" {"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    code"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#1976D2","--shiki-dark":"#56B6C2"},children:" 0"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    msg"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"ok"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"    data"}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#A9B2C3"},children:":"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"This is ok"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#212121","--shiki-dark":"#A9B2C3"},children:","})]}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"  };"})}),`
`,s.jsx(i.span,{className:"line",children:s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"});"})})]})}),`
`,s.jsxs(i.p,{children:["由此你就得到了一个 ",s.jsx(i.code,{children:"GET /api/todo"})," 的 HTTP 接口，这里面有几个点："]}),`
`,s.jsxs(i.ul,{children:[`
`,s.jsxs(i.li,{children:["文件路径会直观地映射为接口请求路径：",s.jsx(i.code,{children:"/api/todo"}),"。"]}),`
`,s.jsxs(i.li,{children:["文件名 ",s.jsx(i.code,{children:"todo.get.ts"})," 中的 ",s.jsx(i.code,{children:"get"})," 会被映射为 HTTP GET 方法。同理，你可以这么定义一个 POST 请求：",s.jsx(i.code,{children:"todo.post.ts"}),"。"]}),`
`,s.jsxs(i.li,{children:["需要从 ",s.jsx(i.code,{children:"servite/runtime/server"})," 导出 ",s.jsx(i.code,{children:"eventHandler"})," 方法来定义请求处理器。"]}),`
`]}),`
`,s.jsxs(i.p,{children:["定义完接口后，在前端就可以通过原生 ",s.jsx(i.code,{children:"fetch"})," 或 ",s.jsx(i.code,{children:"axios"}),` 等请求库来调用此接口。
而为了便于快速开发，Servite 内置了 `,s.jsx(i.a,{href:"https://github.com/unjs/ofetch",children:"ofetch"})," 请求库，你可以通过 ",s.jsx(i.code,{children:"servite/runtime/fetch"})," 导入 ",s.jsx(i.code,{children:"ofetch"})," 的相关方法："]}),`
`,s.jsx(i.pre,{className:"shiki shiki-themes min-light plastic",style:{backgroundColor:"#ffffff","--shiki-dark-bg":"#21252B",color:"#24292eff","--shiki-dark":"#A9B2C3"},tabIndex:"0",children:s.jsxs(i.code,{children:[s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"import"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" { "}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#C6CCD7"},children:"$fetch"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:" } "}),s.jsx(i.span,{style:{color:"#D32F2F","--shiki-dark":"#E06C75"},children:"from"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:" '"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"servite/runtime/fetch"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:";"})]}),`
`,s.jsxs(i.span,{className:"line",children:[s.jsx(i.span,{style:{color:"#6F42C1","--shiki-dark":"#B57EDC"},children:"$fetch"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:"("}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#98C379"},children:"/api/todo"}),s.jsx(i.span,{style:{color:"#22863A","--shiki-dark":"#A9B2C3"},children:"'"}),s.jsx(i.span,{style:{color:"#24292EFF","--shiki-dark":"#A9B2C3"},children:");"})]})]})}),`
`,s.jsx(l,{type:"tip",title:"进阶",children:s.jsxs(i.p,{children:["Servite 支持",s.jsx(i.a,{href:"/zh/guide/unified-invocation",children:"一体化 API 调用"}),"，能提供更好的开发体验。"]})})]})}function t(e={}){const{wrapper:i}={...r(),...e.components};return i?s.jsx(i,{...e,children:s.jsx(n,{...e})}):n(e)}function d(e,i){throw new Error("Expected component `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}export{t as default,h as frontmatter,o as toc};
