const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CZrUrVT1.js","assets/jsx-runtime-OjB1YB6s.js","assets/router-CHubS-Eh.js","assets/index-Bfd0p7Qn.js","assets/preload-helper-BrvI3jIZ.js","assets/icons-l6Z_DaLy.js","assets/index-Crl2ozBJ.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,R as N}from"./jsx-runtime-OjB1YB6s.js";import{L as S}from"./router-CHubS-Eh.js";import{_ as I,a as _}from"./preload-helper-BrvI3jIZ.js";import{q as M,h as $,O as C,p as L,c as p,L as j,R,a as H,m as A,A as F,b as O,n as B}from"./icons-l6Z_DaLy.js";import{M as q}from"./index-Crl2ozBJ.js";import{a as W,b as z,S as D,O as E,d as P}from"./index-Bfd0p7Qn.js";let k=!1;const V=({children:s})=>{const[t,a]=d.useState(k);return d.useEffect(()=>{k=!0,a(!0)},[]),t?e.jsx(e.Fragment,{children:s}):null},w="servite-island-hydrate";let y=new Set;function U(s){return y===!0||y.has(s)}const v={};function Y({innerRef:s,hydrate:t,...a}){const[l,r]=d.useState(()=>({innerHtml:document.getElementById(t.id)?.innerHTML||"",Component:v[t.id]?.Component}));return d.useEffect(()=>{if(!t.on)return;const c=async()=>{if(v[t.id]?.Component)return;const{default:n}=await t.load();v[t.id]={Component:n},r(o=>({...o,Component:n}))};switch(t.on){case"load":{c();break}case"idle":{(window.requestIdleCallback||(n=>setTimeout(n,100)))(c);break}case"visible":{const n=document.getElementById(t.id);if(!n)break;const o=new IntersectionObserver(m=>{for(const f of m)if(f.isIntersecting){o.disconnect(),c();break}});for(const m of Array.from(n.children))o.observe(m);break}case"manual":{const n=()=>U(t.id)?(c(),window.removeEventListener(w,n),!0):!1;n()||window.addEventListener(w,n);break}default:{if(t.on.startsWith("media ")){const n=t.on.replace("media ",""),o=window.matchMedia(n);o.matches?c():o.addEventListener("change",m=>{m.matches&&c()});break}console.warn(`Unsupported hydrate mode: ${t.on}. Use 'load' | 'idle' | 'visible' | 'manual' | 'media' instead.`),c()}}if(typeof t.timeout=="number"){const n=setTimeout(()=>c(),t.timeout);return()=>clearTimeout(n)}},[]),l.Component?e.jsx("servite-island",{id:t.id,style:{display:"contents"},children:e.jsx(l.Component,{ref:s,...a})}):e.jsx("servite-island",{id:t.id,style:{display:"contents"},dangerouslySetInnerHTML:{__html:l.innerHtml},suppressHydrationWarning:!0})}const G=()=>I(()=>import("./index-CZrUrVT1.js"),__vite__mapDeps([0,1,2,3,4,5,6])),K=d.forwardRef(function(t,a){return e.jsx(Y,{...t,innerRef:a,hydrate:{...t.hydrate,id:t.hydrate?.id||"island_07604",load:G}})}),X={tip:M,info:$,warning:C,danger:L};function J({type:s,title:t=s.toUpperCase(),icon:a=X[s],children:l}){return e.jsxs("div",{className:`callout callout-${s} relative my-5 p-4 rounded-lg`,children:[e.jsx("div",{className:"callout-bg absolute top-0 bottom-0 left-0 right-0 rounded-lg"}),e.jsxs("div",{className:"callout-header flex items-start space-x-2 text-base font-bold",children:[e.jsx("span",{className:"flex items-center h-6",children:typeof a=="string"?a:N.createElement(a,{width:"1.2em"})}),e.jsx("div",{children:t})]}),l&&e.jsx("div",{className:"callout-content mt-1 ml-0.5",children:l})]})}function Q({href:s,...t}){return s?.startsWith("/")?e.jsx(S,{...t,to:s||""}):e.jsx("a",{href:s,target:"_blank",rel:"noreferrer",...t})}function Z({children:s}){return e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(q,{components:{Callout:J,a:Q},children:s})})}const g={left:"right",right:"left",top:"bottom",bottom:"top"};function ee({strength:s=10,steps:t=8,falloffPercentage:a=100,tint:l="transparent",side:r="top",...c}){const n=Math.max(1,t),o=a/n,m=.5,f=Math.pow(s/m,1/(n-1)),u=100-a,i=x=>`blur(${m*f**(n-x-1)}px)`;return e.jsx("div",{...c,style:{pointerEvents:"none",transformOrigin:r,...c.style},children:e.jsxs("div",{style:{position:"relative",zIndex:0,width:"100%",height:"100%",background:`linear-gradient(
            to ${g[r]},
            rgb(from ${l} r g b / alpha) 0%,
            rgb(from ${l} r g b / 0%) 100%
          )`},children:[e.jsx("div",{style:{position:"absolute",zIndex:1,inset:0,mask:`linear-gradient(
                  to ${g[r]},
                  rgba(0, 0, 0, 1) ${u}%,
                  rgba(0, 0, 0, 0) ${u+o}%
                )`,backdropFilter:i(0),WebkitBackdropFilter:i(0)}}),n>1&&e.jsx("div",{style:{position:"absolute",zIndex:2,inset:0,mask:`linear-gradient(
                to ${g[r]},
                  rgba(0, 0, 0, 1) ${u}%,
                  rgba(0, 0, 0, 1) ${u+o}%,
                  rgba(0, 0, 0, 0) ${u+o*2}%
                )`,backdropFilter:i(1),WebkitBackdropFilter:i(1)}}),n>2&&Array.from({length:n-2}).map((x,h)=>e.jsx("div",{style:{position:"absolute",zIndex:h+2,inset:0,mask:`linear-gradient(
                    to ${g[r]},
                    rgba(0, 0, 0, 0) ${u+h*o}%,
                    rgba(0, 0, 0, 1) ${u+(h+1)*o}%,
                    rgba(0, 0, 0, 1) ${u+(h+2)*o}%,
                    rgba(0, 0, 0, 0) ${u+(h+3)*o}%
                  )`,backdropFilter:i(h+2),WebkitBackdropFilter:i(h+2)}},h))]})})}function te(){const s=W();return s[s.length-1]?.handle||{}}const T=[{title:"介绍",value:"/zh/guide"},{title:"开始上手",value:"/zh/guide/start"},{title:"配置",value:"/zh/guide/config"},{title:"目录结构",value:"/zh/guide/directory-structure"},{title:"路由",value:"/zh/guide/routes"},{title:"路由数据",value:"/zh/guide/routes-data"},{title:"路由错误",value:"/zh/guide/routes-error"},{title:"服务中间件",value:"/zh/guide/middlewares"},{title:"SSR 服务端渲染",value:"/zh/guide/ssr"},{title:"SSG 静态生成",value:"/zh/guide/ssg"},{title:"CSR 客户端渲染",value:"/zh/guide/csr"},{title:"部署",value:"/zh/guide/deploy"},{title:"进阶",children:[{title:"运行时能力",value:"/zh/guide/runtime"},{title:"一体化 API 调用",value:"/zh/guide/unified-invocation"},{title:"自定义服务端 logger",value:"/zh/guide/custom-logger"},{title:"islands - 孤岛架构",value:"/zh/guide/islands"}]}];function se(s,t){let a=null,l=null,r=null;function c(...n){l=n,r=this,a||(a=setTimeout(()=>{a=null,l&&(s.apply(r,l),l=null,r=null)},t))}return c}function ne(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}const b="servite:theme";function ie({fixedSidebarVisible:s,setFixedSidebarVisible:t}){const{pathname:a}=z(),l=P();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:p("fixed inset-0 bg-black/60 z-40 sm:hidden transition-all",s?"visible opacity-100":"invisible opacity-0 pointer-events-none"),onClick:()=>t(!1)}),e.jsx(B,{className:p("flex-shrink-0 fixed top-0 right-full bottom-0 h-screen bg-background z-40 sm:z-auto sm:sticky sm:-mt-14 sm:pt-20 sm:bg-transparent transition-transform overflow-x-auto",s&&"translate-x-full"),items:T,value:a,onChange:r=>{d.startTransition(()=>l(r)),t(!1)}}),e.jsx("div",{className:"px-5 sm:px-7 flex-1 pt-6 pb-14 min-w-0",children:e.jsx(Z,{children:e.jsx(E,{})})}),e.jsx(K,{hydrate:{on:"visible"},className:"sticky top-14 pt-6 flex-shrink-0 hidden lg:block"})]})}function ue(){const{pathname:s}=z(),{toc:t}=te(),a=d.useMemo(()=>t?.find(i=>i.depth===1)?.text,[t]),[l,r]=d.useState(!1),[c,n]=d.useState(!1),[o,m]=d.useState(()=>typeof document<"u"&&window.localStorage.getItem(b)||"light"),f=d.useMemo(()=>{for(const i of T)if("children"in i){const x=i.children?.find(h=>h.value===s);if(x)return[i,x]}else if(i.value===s)return[i]},[s]),u=()=>{const i=o==="light"?"dark":"light";m(i),window.localStorage.setItem(b,i),document.documentElement.classList.toggle("dark")};return d.useEffect(()=>{const i=se(()=>{ne()>=120?n(!0):n(!1)},50);return i(),window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{titleTemplate:"%s | Servite",defaultTitle:"Servite",children:[e.jsx("title",{children:a}),e.jsx("meta",{name:"description",content:"A full-stack React framework"}),e.jsx("script",{children:`const __theme = typeof document !== 'undefined' && window.localStorage.getItem('${b}') || 'light';
            if (__theme === 'dark') {
              document.documentElement.classList.add('dark');
            }`})]}),e.jsx(D,{}),e.jsxs("div",{children:[e.jsxs("header",{className:"sticky top-0 left-0 right-0 z-30",children:[e.jsx(ee,{className:p("absolute top-0 left-0 right-0",f?.length?"h-28 sm:h-20":"h-20")}),e.jsx("div",{className:p("absolute bottom-0 left-0 right-0 h-px bg-border/60 transition-opacity",c&&"opacity-0")}),e.jsxs("div",{className:"max-w-[1380px] h-14 px-5 sm:px-7 mx-auto flex items-center relative",children:[e.jsx("div",{className:"w-64",children:e.jsx(S,{className:"inline-block",to:"/zh",children:e.jsx("h1",{className:"text-xl font-semibold",children:"Servite"})})}),a&&e.jsx("div",{className:"relative h-full flex-1 overflow-hidden",children:e.jsx("h2",{className:p("hidden sm:flex text-xl font-medium absolute left-0 h-full items-center cursor-pointer transition-all",c?"top-0 opacity-100":"top-full opacity-0"),onClick:()=>window.scrollTo({top:0}),children:a})}),e.jsxs("div",{className:"ml-auto space-x-1",children:[e.jsx(V,{children:e.jsx(j,{variant:"ghost",size:"icon",icon:o==="light"?e.jsx(R,{}):e.jsx(H,{}),onClick:u})}),e.jsx("a",{href:"https://github.com/Codpoe/servite",target:"_blank",rel:"noreferrer",children:e.jsx(j,{variant:"ghost",size:"icon",icon:e.jsx(A,{})})})]})]}),!!f?.length&&e.jsxs("div",{className:"sm:hidden sticky top-14 z-30 h-9 px-5 sm:px-7 flex items-center space-x-2 font-medium cursor-pointer",onClick:()=>r(!0),children:[e.jsx(F,{width:12}),f?.map((i,x)=>e.jsxs(d.Fragment,{children:[e.jsx("span",{className:"text-xs",children:i.title},x),x<f.length-1&&e.jsx(O,{width:12})]},x))]})]}),e.jsx("div",{className:"max-w-[1380px] mx-auto flex justify-center items-start",children:f?.length?e.jsx(ie,{fixedSidebarVisible:l,setFixedSidebarVisible:r}):e.jsx(E,{})})]})]})}export{ue as L,ne as g,se as t,te as u};
