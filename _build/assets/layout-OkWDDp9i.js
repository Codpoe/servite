const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BqeOggNR.js","assets/jsx-runtime-OjB1YB6s.js","assets/router-DOCjaTsd.js","assets/index-DsYWWv1e.js","assets/preload-helper-BrvI3jIZ.js","assets/icons-DiXaHApO.js","assets/index-Crl2ozBJ.js","assets/index-XTmkerQn.js"])))=>i.map(i=>d[i]);
import{r as o,j as e,R as I}from"./jsx-runtime-OjB1YB6s.js";import{L as v}from"./router-DOCjaTsd.js";import{_ as y,a as C}from"./preload-helper-BrvI3jIZ.js";import{q as L,h as M,O as R,p as A,c as x,L as b,R as H,a as O,m as q,A as D,b as F,n as P}from"./icons-DiXaHApO.js";import{M as V}from"./index-Crl2ozBJ.js";import{a as $,b as T,S as W,O as E}from"./index-DsYWWv1e.js";let j=!1;const B=({fallback:n,children:t})=>{const[s,a]=o.useState(j);return o.useEffect(()=>{j=!0,a(!0)},[]),s?e.jsx(e.Fragment,{children:t}):n},w="servite-island-hydrate";let k=new Set;function U(n){return k===!0||k.has(n)}const h={};function S({innerRef:n,hydrate:t,...s}){const[a,c]=o.useState(()=>({innerHtml:document.getElementById(t.id)?.innerHTML||"",Component:h[t.id]?.Component}));return o.useEffect(()=>{if(!t.on){console.debug("[servite] skip hydrate island:",t.id);return}const r=async()=>{if(!h[t.id]?.Component){console.debug("[servite] start hydrate island:",t.id);const{default:d}=await t.load();h[t.id]={Component:d}}const{Component:i}=h[t.id];c(d=>({...d,Component:i}))};switch(t.on){case"load":{r();break}case"idle":{(window.requestIdleCallback||(i=>setTimeout(i,100)))(r);break}case"visible":{const i=document.getElementById(t.id);if(!i)break;const d=new IntersectionObserver(u=>{for(const m of u)if(m.isIntersecting){d.disconnect(),r();break}});for(const u of Array.from(i.children))d.observe(u);break}case"manual":{const i=()=>U(t.id)?(r(),window.removeEventListener(w,i),!0):!1;i()||window.addEventListener(w,i);break}default:{if(t.on.startsWith("media ")){const i=t.on.replace("media ",""),d=window.matchMedia(i);d.matches?r():d.addEventListener("change",u=>{u.matches&&r()});break}console.warn(`Unsupported hydrate mode: ${t.on}. Use 'load' | 'idle' | 'visible' | 'manual' | 'media' instead.`),r()}}if(typeof t.timeout=="number"){const i=setTimeout(()=>r(),t.timeout);return()=>clearTimeout(i)}},[]),a.Component?e.jsx("servite-island",{id:t.id,style:{display:"contents"},children:e.jsx(a.Component,{ref:n,...s})}):e.jsx("servite-island",{id:t.id,style:{display:"contents"},dangerouslySetInnerHTML:{__html:a.innerHtml},suppressHydrationWarning:!0})}const Y=()=>y(()=>import("./index-BqeOggNR.js"),__vite__mapDeps([0,1,2,3,4,5,6])),G=o.forwardRef(function(t,s){return e.jsx(S,{...t,innerRef:s,hydrate:{...t.hydrate,id:t.hydrate?.id||"island_07604",load:Y}})}),K=()=>y(()=>import("./index-XTmkerQn.js"),__vite__mapDeps([7,1,5,3,2,4,6])),X=o.forwardRef(function(t,s){return e.jsx(S,{...t,innerRef:s,hydrate:{...t.hydrate,id:t.hydrate?.id||"island_54630",load:K}})}),J={tip:L,info:M,warning:R,danger:A};function Q({type:n,title:t=n.toUpperCase(),icon:s=J[n],children:a}){return e.jsxs("div",{className:`callout callout-${n} relative my-5 p-4 rounded-lg`,children:[e.jsx("div",{className:"callout-bg absolute top-0 bottom-0 left-0 right-0 rounded-lg"}),e.jsxs("div",{className:"callout-header flex items-start space-x-2 text-base font-bold",children:[e.jsx("span",{className:"flex items-center h-6",children:typeof s=="string"?s:I.createElement(s,{width:"1.2em"})}),e.jsx("div",{children:t})]}),a&&e.jsx("div",{className:"callout-content mt-1 ml-0.5",children:a})]})}function Z({href:n,...t}){return n?.startsWith("/")?e.jsx(v,{...t,to:n||""}):e.jsx("a",{href:n,target:"_blank",rel:"noreferrer",...t})}function ee(n){return e.jsx("div",{className:"my-[2em] overflow-x-auto",children:e.jsx("table",{...n})})}function te({children:n}){return e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(V,{components:{Callout:Q,a:Z,table:ee},children:n})})}function ne(){const n=$();return n[n.length-1]?.handle||{}}const _=[{title:"介绍",value:"/zh/guide"},{title:"开始上手",value:"/zh/guide/start"},{title:"配置",value:"/zh/guide/config"},{title:"目录结构",value:"/zh/guide/directory-structure"},{title:"路由",value:"/zh/guide/routes"},{title:"路由数据",value:"/zh/guide/routes-data"},{title:"路由错误",value:"/zh/guide/routes-error"},{title:"服务中间件",value:"/zh/guide/middlewares"},{title:"SSR 服务端渲染",value:"/zh/guide/ssr"},{title:"SSG 静态生成",value:"/zh/guide/ssg"},{title:"CSR 客户端渲染",value:"/zh/guide/csr"},{title:"部署",value:"/zh/guide/deploy"},{title:"进阶",children:[{title:"运行时能力",value:"/zh/guide/runtime"},{title:"一体化 API 调用",value:"/zh/guide/unified-invocation"},{title:"自定义服务端 logger",value:"/zh/guide/custom-logger"},{title:"islands - 孤岛架构",value:"/zh/guide/islands"}]}];function se(n,t){let s=null,a=null,c=null;function r(...i){a=i,c=this,s||(s=setTimeout(()=>{s=null,a&&(n.apply(c,a),a=null,c=null)},t))}return r}function he(n,t){let s=null;function a(...c){s&&clearTimeout(s),s=setTimeout(()=>{n.apply(this,c)},t)}return a}function ie(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}function ae({value:n,children:t}){return e.jsx(v,{className:"block",to:n,children:t})}const p="servite:theme",g=["en","zh"];function le(n){const t=n.split("/")[1];return t&&g.includes(t)?t:g[0]}function oe({fixedSidebarVisible:n,setFixedSidebarVisible:t}){const{pathname:s}=T();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x("fixed inset-0 bg-black/60 z-40 sm:hidden transition-all",n?"visible opacity-100":"invisible opacity-0 pointer-events-none"),onClick:()=>t(!1)}),e.jsx(P,{className:x("flex-shrink-0 fixed top-0 right-full bottom-0 h-screen bg-background z-40 sm:z-auto sm:sticky sm:-mt-14 sm:pt-20 sm:bg-transparent transition-transform overflow-x-auto",n&&"translate-x-full"),items:_,itemWrapper:ae,value:s,onChange:()=>{t(!1)}}),e.jsx("div",{className:"px-5 sm:px-7 flex-1 pt-6 pb-14 min-w-0","data-pagefind-body":!0,children:e.jsx(te,{children:e.jsx(E,{})})})]})}function xe(){const{pathname:n}=T(),{toc:t}=ne(),s=o.useMemo(()=>t?.find(l=>l.depth===1)?.text,[t]),[a,c]=o.useState(!1),[r,i]=o.useState(!1),[d,u]=o.useState(()=>typeof document<"u"&&window.localStorage.getItem(p)||"light"),m=o.useMemo(()=>{for(const l of _)if("children"in l){const f=l.children?.find(z=>z.value===n);if(f)return[l,f]}else if(l.value===n)return[l]},[n]),N=()=>{const l=d==="light"?"dark":"light";u(l),window.localStorage.setItem(p,l),document.documentElement.classList.toggle("dark")};return o.useEffect(()=>{const l=se(()=>{ie()>=120?i(!0):i(!1)},50);return l(),window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs(C,{titleTemplate:"%s | Servite",defaultTitle:"Servite",htmlAttributes:{lang:le(n)},children:[e.jsx("title",{"data-pagefind-meta":`title:${s}`,children:s}),e.jsx("meta",{name:"description",content:"A full-stack React framework"}),e.jsx("script",{children:`const __theme = typeof document !== 'undefined' && window.localStorage.getItem('${p}') || 'light';
            if (__theme === 'dark') {
              document.documentElement.classList.add('dark');
            }`})]}),e.jsx(W,{}),e.jsxs("div",{children:[e.jsxs("header",{className:"sticky top-0 left-0 right-0 z-30 bg-background/60 border-b border-border backdrop-blur-sm backdrop-saturate-200",children:[e.jsxs("div",{className:"max-w-[1380px] h-14 px-5 sm:px-7 mx-auto flex items-center relative",children:[e.jsx("div",{className:"w-64",children:e.jsx(v,{className:"inline-block",to:"/zh",children:e.jsx("h1",{className:"text-xl font-semibold",children:"Servite"})})}),s&&e.jsx("div",{className:"relative h-full flex-1 overflow-hidden",children:e.jsx("h2",{className:x("hidden sm:flex text-xl font-medium absolute left-0 h-full items-center cursor-pointer transition-all",r?"top-0 opacity-100":"top-full opacity-0"),onClick:()=>window.scrollTo({top:0}),children:s})}),e.jsxs("div",{className:"ml-auto space-x-1 flex items-start",children:[e.jsx(X,{className:"hidden md:block mr-2",hydrate:{on:"media (min-width: 768px)"}}),e.jsx(B,{fallback:e.jsx("button",{className:"w-9"}),children:e.jsx(b,{variant:"ghost",size:"icon",icon:d==="light"?e.jsx(H,{}):e.jsx(O,{}),onClick:N})}),e.jsx("a",{href:"https://github.com/Codpoe/servite",target:"_blank",rel:"noreferrer",children:e.jsx(b,{variant:"ghost",size:"icon",icon:e.jsx(q,{})})})]})]}),!!m?.length&&e.jsxs("div",{className:"sm:hidden sticky top-14 z-30 h-9 px-5 sm:px-7 flex items-center space-x-2 font-medium cursor-pointer border-t border-border",onClick:()=>c(!0),children:[e.jsx(D,{width:12}),m?.map((l,f)=>e.jsxs(o.Fragment,{children:[e.jsx("span",{className:"text-xs",children:l.title},f),f<m.length-1&&e.jsx(F,{width:12})]},f))]})]}),e.jsxs("div",{className:"max-w-[1380px] mx-auto flex justify-center items-start",children:[m?.length?e.jsx(oe,{fixedSidebarVisible:a,setFixedSidebarVisible:c}):e.jsx(E,{}),e.jsx(G,{hydrate:{on:"media (min-width: 1024px)"},className:x("sticky top-14 pt-6 flex-shrink-0 hidden",m?.length&&"lg:block")})]})]})]})}export{xe as L,he as d,ie as g,se as t,ne as u};
