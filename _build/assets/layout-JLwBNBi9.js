const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B9qyAsg1.js","assets/jsx-runtime-OjB1YB6s.js","assets/router-7oJmyMQx.js","assets/index-DsYWWv1e.js","assets/preload-helper-BrvI3jIZ.js","assets/icons-ea8ioEWL.js","assets/index-Crl2ozBJ.js"])))=>i.map(i=>d[i]);
import{r as c,j as e,R as N}from"./jsx-runtime-OjB1YB6s.js";import{L as g}from"./router-7oJmyMQx.js";import{_ as z,a as _}from"./preload-helper-BrvI3jIZ.js";import{q as C,h as I,O as M,p as L,c as x,L as v,R,a as H,m as A,A as O,b as q,n as D}from"./icons-ea8ioEWL.js";import{M as F}from"./index-Crl2ozBJ.js";import{a as V,b as k,S as W,O as S}from"./index-DsYWWv1e.js";let b=!1;const B=({children:s})=>{const[t,n]=c.useState(b);return c.useEffect(()=>{b=!0,n(!0)},[]),t?e.jsx(e.Fragment,{children:s}):null},j="servite-island-hydrate";let w=new Set;function P(s){return w===!0||w.has(s)}const h={};function U({innerRef:s,hydrate:t,...n}){const[a,d]=c.useState(()=>({innerHtml:document.getElementById(t.id)?.innerHTML||"",Component:h[t.id]?.Component}));return c.useEffect(()=>{if(!t.on){console.debug("[servite] skip hydrate island:",t.id);return}const o=async()=>{if(!h[t.id]?.Component){console.debug("[servite] start hydrate island:",t.id);const{default:r}=await t.load();h[t.id]={Component:r}}const{Component:i}=h[t.id];d(r=>({...r,Component:i}))};switch(t.on){case"load":{o();break}case"idle":{(window.requestIdleCallback||(i=>setTimeout(i,100)))(o);break}case"visible":{const i=document.getElementById(t.id);if(!i)break;const r=new IntersectionObserver(u=>{for(const m of u)if(m.isIntersecting){r.disconnect(),o();break}});for(const u of Array.from(i.children))r.observe(u);break}case"manual":{const i=()=>P(t.id)?(o(),window.removeEventListener(j,i),!0):!1;i()||window.addEventListener(j,i);break}default:{if(t.on.startsWith("media ")){const i=t.on.replace("media ",""),r=window.matchMedia(i);r.matches?o():r.addEventListener("change",u=>{u.matches&&o()});break}console.warn(`Unsupported hydrate mode: ${t.on}. Use 'load' | 'idle' | 'visible' | 'manual' | 'media' instead.`),o()}}if(typeof t.timeout=="number"){const i=setTimeout(()=>o(),t.timeout);return()=>clearTimeout(i)}},[]),a.Component?e.jsx("servite-island",{id:t.id,style:{display:"contents"},children:e.jsx(a.Component,{ref:s,...n})}):e.jsx("servite-island",{id:t.id,style:{display:"contents"},dangerouslySetInnerHTML:{__html:a.innerHtml},suppressHydrationWarning:!0})}const Y=()=>z(()=>import("./index-B9qyAsg1.js"),__vite__mapDeps([0,1,2,3,4,5,6])),$=c.forwardRef(function(t,n){return e.jsx(U,{...t,innerRef:n,hydrate:{...t.hydrate,id:t.hydrate?.id||"island_07604",load:Y}})}),G={tip:C,info:I,warning:M,danger:L};function K({type:s,title:t=s.toUpperCase(),icon:n=G[s],children:a}){return e.jsxs("div",{className:`callout callout-${s} relative my-5 p-4 rounded-lg`,children:[e.jsx("div",{className:"callout-bg absolute top-0 bottom-0 left-0 right-0 rounded-lg"}),e.jsxs("div",{className:"callout-header flex items-start space-x-2 text-base font-bold",children:[e.jsx("span",{className:"flex items-center h-6",children:typeof n=="string"?n:N.createElement(n,{width:"1.2em"})}),e.jsx("div",{children:t})]}),a&&e.jsx("div",{className:"callout-content mt-1 ml-0.5",children:a})]})}function X({href:s,...t}){return s?.startsWith("/")?e.jsx(g,{...t,to:s||""}):e.jsx("a",{href:s,target:"_blank",rel:"noreferrer",...t})}function J(s){return e.jsx("div",{className:"my-[2em] overflow-x-auto",children:e.jsx("table",{...s})})}function Q({children:s}){return e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(F,{components:{Callout:K,a:X,table:J},children:s})})}function Z(){const s=V();return s[s.length-1]?.handle||{}}const E=[{title:"介绍",value:"/zh/guide"},{title:"开始上手",value:"/zh/guide/start"},{title:"配置",value:"/zh/guide/config"},{title:"目录结构",value:"/zh/guide/directory-structure"},{title:"路由",value:"/zh/guide/routes"},{title:"路由数据",value:"/zh/guide/routes-data"},{title:"路由错误",value:"/zh/guide/routes-error"},{title:"服务中间件",value:"/zh/guide/middlewares"},{title:"SSR 服务端渲染",value:"/zh/guide/ssr"},{title:"SSG 静态生成",value:"/zh/guide/ssg"},{title:"CSR 客户端渲染",value:"/zh/guide/csr"},{title:"部署",value:"/zh/guide/deploy"},{title:"进阶",children:[{title:"运行时能力",value:"/zh/guide/runtime"},{title:"一体化 API 调用",value:"/zh/guide/unified-invocation"},{title:"自定义服务端 logger",value:"/zh/guide/custom-logger"},{title:"islands - 孤岛架构",value:"/zh/guide/islands"}]}];function ee(s,t){let n=null,a=null,d=null;function o(...i){a=i,d=this,n||(n=setTimeout(()=>{n=null,a&&(s.apply(d,a),a=null,d=null)},t))}return o}function te(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}function se({value:s,children:t}){return e.jsx(g,{className:"block",to:s,children:t})}const p="servite:theme";function ne({fixedSidebarVisible:s,setFixedSidebarVisible:t}){const{pathname:n}=k();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x("fixed inset-0 bg-black/60 z-40 sm:hidden transition-all",s?"visible opacity-100":"invisible opacity-0 pointer-events-none"),onClick:()=>t(!1)}),e.jsx(D,{className:x("flex-shrink-0 fixed top-0 right-full bottom-0 h-screen bg-background z-40 sm:z-auto sm:sticky sm:-mt-14 sm:pt-20 sm:bg-transparent transition-transform overflow-x-auto",s&&"translate-x-full"),items:E,itemWrapper:se,value:n,onChange:()=>{t(!1)}}),e.jsx("div",{className:"px-5 sm:px-7 flex-1 pt-6 pb-14 min-w-0",children:e.jsx(Q,{children:e.jsx(S,{})})})]})}function de(){const{pathname:s}=k(),{toc:t}=Z(),n=c.useMemo(()=>t?.find(l=>l.depth===1)?.text,[t]),[a,d]=c.useState(!1),[o,i]=c.useState(!1),[r,u]=c.useState(()=>typeof document<"u"&&window.localStorage.getItem(p)||"light"),m=c.useMemo(()=>{for(const l of E)if("children"in l){const f=l.children?.find(y=>y.value===s);if(f)return[l,f]}else if(l.value===s)return[l]},[s]),T=()=>{const l=r==="light"?"dark":"light";u(l),window.localStorage.setItem(p,l),document.documentElement.classList.toggle("dark")};return c.useEffect(()=>{const l=ee(()=>{te()>=120?i(!0):i(!1)},50);return l(),window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)}},[]),e.jsxs(e.Fragment,{children:[e.jsxs(_,{titleTemplate:"%s | Servite",defaultTitle:"Servite",children:[e.jsx("title",{children:n}),e.jsx("meta",{name:"description",content:"A full-stack React framework"}),e.jsx("script",{children:`const __theme = typeof document !== 'undefined' && window.localStorage.getItem('${p}') || 'light';
            if (__theme === 'dark') {
              document.documentElement.classList.add('dark');
            }`})]}),e.jsx(W,{}),e.jsxs("div",{children:[e.jsxs("header",{className:"sticky top-0 left-0 right-0 z-30 bg-background/60 border-b border-border backdrop-blur-sm backdrop-saturate-200",children:[e.jsxs("div",{className:"max-w-[1380px] h-14 px-5 sm:px-7 mx-auto flex items-center relative",children:[e.jsx("div",{className:"w-64",children:e.jsx(g,{className:"inline-block",to:"/zh",children:e.jsx("h1",{className:"text-xl font-semibold",children:"Servite"})})}),n&&e.jsx("div",{className:"relative h-full flex-1 overflow-hidden",children:e.jsx("h2",{className:x("hidden sm:flex text-xl font-medium absolute left-0 h-full items-center cursor-pointer transition-all",o?"top-0 opacity-100":"top-full opacity-0"),onClick:()=>window.scrollTo({top:0}),children:n})}),e.jsxs("div",{className:"ml-auto space-x-1",children:[e.jsx(B,{children:e.jsx(v,{variant:"ghost",size:"icon",icon:r==="light"?e.jsx(R,{}):e.jsx(H,{}),onClick:T})}),e.jsx("a",{href:"https://github.com/Codpoe/servite",target:"_blank",rel:"noreferrer",children:e.jsx(v,{variant:"ghost",size:"icon",icon:e.jsx(A,{})})})]})]}),!!m?.length&&e.jsxs("div",{className:"sm:hidden sticky top-14 z-30 h-9 px-5 sm:px-7 flex items-center space-x-2 font-medium cursor-pointer border-t border-border",onClick:()=>d(!0),children:[e.jsx(O,{width:12}),m?.map((l,f)=>e.jsxs(c.Fragment,{children:[e.jsx("span",{className:"text-xs",children:l.title},f),f<m.length-1&&e.jsx(q,{width:12})]},f))]})]}),e.jsxs("div",{className:"max-w-[1380px] mx-auto flex justify-center items-start",children:[m?.length?e.jsx(ne,{fixedSidebarVisible:a,setFixedSidebarVisible:d}):e.jsx(S,{}),e.jsx($,{hydrate:{on:"media (min-width: 1024px)"},className:x("sticky top-14 pt-6 flex-shrink-0 hidden",m?.length&&"lg:block")})]})]})]})}export{de as L,te as g,ee as t,Z as u};
